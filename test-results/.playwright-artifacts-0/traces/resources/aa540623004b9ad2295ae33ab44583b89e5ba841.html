



<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Page header start here -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="cache-control" content="no-store" />
<meta http-equiv="cache-control" content="must-revalidate" />
<meta http-equiv="expires" content="-1" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<link rel="shortcut icon" href="theme/html/blue/atrad/images/favicon.ico" type="image/x-icon" />
<!-- browser tab title-->
<title>ATrad Home</title>
<!-- Style sheets -->
<link id="atradtheme" rel="stylesheet" type="text/css" href="theme/html/blue/claro/clarohome.css"/>
<link id="tickertheme" rel="stylesheet" type="text/css" href=""/>
<link href="theme/html/atradresponsive.css" rel="stylesheet" type="text/css">

<!-- javascript references -->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LXP31510HK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-LXP31510HK');
</script>

<style type="text/css">

</style>
<script type="text/javascript" src="theme/html/scripts/dojo/dojo.js"
	djConfig="parseOnLoad:true, isDebug:false"></script>
<script type="text/javascript" src="theme/html/scripts/myapp/homeDojo.js"></script>
<script type="text/javascript" src="view/html/scripts/AJAXConnection.js"></script>
<script type="text/javascript" src="view/html/scripts/errorDisplay.js"></script>

<script type="text/javascript" src="view/html/scripts/customizeErrorDisplay.js"></script>
<!--<script type="text/javascript" src="view/html/scripts/jsPDF.js"></script>-->
<!--script type="text/javascript"
	src="theme/html/scripts/dojox/fx/Shadow.js"></script-->
<script type="text/javascript" src="theme/html/scripts/themeloader.jsp"></script>
<script type="text/javascript"
	src="language/scripts/ClientMsgTranslator.jsp"></script>
<script type="text/javascript" src="view/html/scripts/ticker.js"></script>
<script type="text/javascript" src="view/html/scripts/watch.js"></script>
<script type="text/javascript" src="view/html/scripts/atradMenuBar.jsp"></script>
<script type="text/javascript"
	src="view/html/scripts/atradPageSettingsMenu.jsp"></script>
<script type="text/javascript"
	src="theme/html/scripts/dojox/layout/ExpandoPane.js"></script>
<script type="text/javascript"
	src="view/html/scripts/atradWatchExpandableContainer.jsp"></script>
<script type="text/javascript"
	src="view/html/scripts/atradWatchSettingMenu.jsp"></script>
<!--script type="text/javascript"
	src="theme/html/scripts/dojox/layout/GridContainer.js"></script-->

<!--script type="text/javascript"
	src="theme/html/scripts/dojox/widget/FeedPortlet.js"></script-->
<script type="text/javascript"
	src="view/html/scripts/securitySelectionWindow.js"></script>
<script type="text/javascript"
	src="view/html/scripts/atradWatchAddSecurityMenu.js"></script>
<script type="text/javascript" src="view/html/scripts/util/util.js"></script>
<script type="text/javascript"
	src="view/html/scripts/confirmationMessage.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/confirmationWithInputMessage.js"></script>
<script type="text/javascript"
	src="view/html/scripts/order/orderValidation.js"></script>
<script type="text/javascript"
	src="view/html/scripts/globalController.js"></script>
<script type="text/javascript" src="view/html/scripts/globalWin.js"></script>
<script type="text/javascript" src="view/html/scripts/globalTab.js"></script>
<script type="text/javascript" src="view/html/scripts/tabbedOrderBook.js"></script>
<!--  <script type="text/javascript"
	src="view/html/scripts/order/orderWindow.js"></script>-->
<script type="text/javascript" src="view/html/scripts/order/blotter.js"></script>
<script type="text/javascript" src="view/html/scripts/order/blotter_ac.js"></script>
<script type="text/javascript" src="view/html/scripts/order/blotter_inac.js"></script>
<script type="text/javascript"
	src="view/html/scripts/order/orderHistory.js"></script>

<script type="text/javascript"
	src="view/html/scripts/client/accountStatement.js"></script>
<script type="text/javascript"
	src="view/html/scripts/market/statistics.js"></script>
<script type="text/javascript"
	src="view/html/scripts/market/tradeBook.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/market/tradeBookSummary.js"></script>
<script type="text/javascript"
	src="view/html/scripts/market/marketTimeSale.js"></script>
<script type="text/javascript"
	src="view/html/scripts/report/marketTimeSaleHistory.js"></script>
<script type="text/javascript"
	src="view/html/scripts/market/securitySearch.js"></script>
<script type="text/javascript" src="view/html/scripts/market/indexes.js"></script>
<script type="text/javascript"
	src="view/html/scripts/order/orderBook.js"></script>
<script type="text/javascript"
	src="view/html/scripts/market/announcement.js"></script>
<script type="text/javascript" src="view/html/scripts/chart.js"></script>
<script type="text/javascript" src="view/html/scripts/analysis.js"></script>
<script type="text/javascript"
	src="view/html/scripts/client/changePassword.js"></script>
<script type="text/javascript"
	src="view/html/scripts/market/OHLCWindow.js"></script>
<script type="text/javascript"
	src="view/html/scripts/client/editCustomWatch.js"></script>
<script type="text/javascript"
	src="view/html/scripts/whatifCalculator.js"></script>	
<script type="text/javascript"
	src="view/html/scripts/taxSettings.js"></script>
<script type="text/javascript"
	src="view/html/scripts/report/symbolTradeSummary.js"></script>
<script type="text/javascript"
	src="view/html/scripts/report/marketIndexSummary.js"></script>
<script type="text/javascript"
	src="view/html/scripts/client/orderBasket.js"></script>
<script type="text/javascript"
	src="view/html/scripts/order/saveBasket.js"></script>
<script type="text/javascript"
	src="view/html/scripts/client/newBasket.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/client/deleteBasket.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/client/renameBasket.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/order/bulkOrders.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/order/bulkOrderApproval.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/order/bulkOrderStatus.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/order/myTrades.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/client/amendBasket.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/client/stockHolding.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/client/portfolioShort.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/order/debtOrderWindow.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/constants/securityTypes.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/constants/couponTypes.js"></script>	
	<script type="text/javascript"
	src="view/html/scripts/client/portfolioDebt.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/market/quickmarketview.js"></script>
	<script type="text/javascript" src="view/html/scripts/order/bloombergOM.js"></script>
	<script type="text/javascript"
	src="view/html/scripts/alert/alerts.js"></script>
	<script type="text/javascript" src="view/html/scripts/avgCostCalculator.js"></script>
	<script type="text/javascript" src="view/html/scripts/client/accountSummary.js"></script>
	<script type="text/javascript" src="view/html/scripts/client/clientInquiry.js"></script>
	<script type="text/javascript" src="view/html/scripts/client/advisorClientInquiry.js"></script>
	<script type="text/javascript" src="view/html/scripts/order/orderTracker.js"></script>		
	<script type="text/javascript" src="view/html/scripts/client/changeClientInfo.js"></script>
	<script type="text/javascript" src="view/html/scripts/report/marketIndexSummaryHistory.js"></script>
	<script type="text/javascript" src="view/html/scripts/order/myTradeFilled.js"></script>
	<script type="text/javascript" src="view/html/scripts/alert/atradAlertViwer.js"></script>
	<script type="text/javascript" src="view/html/scripts/alert/alertDisplay.js"></script>
	<script type="text/javascript" src="view/html/scripts/alert/manageAlerts.js"></script>
	<script type="text/javascript" src="view/html/scripts/order/ManagerApproval.js"></script>
	<script type="text/javascript" src="view/html/scripts/order/ManagerStatus.js"></script>
	<script type="text/javascript" src="view/html/scripts/order/managerApprovalDetails.js"></script>	
	<script type="text/javascript" src="view/html/scripts/market/heatMap.js"></script>
	
<!-- *********************High Chart******************************* -->
<!--  script  src="theme/html/white/Highstock/js/highstock.js"></script>
<script  src="theme/html/white/Highstock/js/modules/exporting.js"></script-->
<script type="text/javascript" src="theme/html/jquery.min.js"></script>
<!-- *********************/High Chart******************************* -->
<!-- javascript code -->
<script type="text/javascript">	
	var enabled = true, randInt = 0;
	var ticker;
	var ajaxConnection;
	var ajaxConForAddSec;
	var lastUpdatedId;
	var secSelectionWindow;
	var allSecurityInfo=null;
	var orderPlacement;
	var GLOBAL_CONTROLLER;
	var atradPageSettingsMenu;
	var userName="Dependra";
	var ticker_time=5000;
	var isFirefox = false;
	var isOpera = false;
	var isChrome = false;
	var isSafari =false;
	var timeDifference=0;

	function setSecurityToQucikWatch(){		

		var addSecUrl = "watch?action=getAllSecurities&format=json&exchange=NEPSE";		
		var addSecHandleAs = "json";	
		var addSecErrorIns1 = new ATRAD.ErrorPanel();		
		var addSecCallbackFun = callBackSetSecurityToQucikWatch;		
		var ajaxConForAddSec = new ATRAD.AJAXConnection(addSecUrl, addSecCallbackFun, addSecHandleAs,-1, addSecErrorIns1);
		ajaxConForAddSec.RequestData();
		
		
	}

	function callBackSetSecurityToQucikWatch(response){	
		ATRAD.Watch.quickSecurityStore=response.data;
		ATRAD.GlobalController.ALL_SECURITY_STORE=response.data;
		var securityDataStore = new dojo.data.ItemFileWriteStore({
			data : {
				items : [

				]
			}
		});
			
		for ( var i = 0; i < response.data.items.length; i++) {
			var securities = response.data.items[i];
			securityDataStore.newItem({
				name : securities.security+"("+securities.securityDes+")"
			});
			securityDataStore.save();
		}
		
		dijit.byId("cmbSecurityHome").store=securityDataStore;
		dijit.byId("cmbSecurityHome").set("queryExpr",ATRAD.DebtOrderWindow.queryExp);
		dijit.byId("cmbSecurityHome").set("pageSize", 10);
		var t=dijit.byId("cmbSecurityHome");
	}
	
	/**
	 * function to get the version number
	 */
	function getVersion(){		
		var url = "home?action=getVersion&format=json";	
		var handleAs = "json";	
		var errorIns1 = new ATRAD.ErrorPanel();
		var versionCallbackFun = getVersionCallback;
		var ajaxConnection = new ATRAD.AJAXConnection(url, versionCallbackFun, handleAs,-1, errorIns1);
		ajaxConnection.RequestData();
	}

	/**
	 * callback method for getVersion method
	 */
	function getVersionCallback(response){		
		dojo.byId('versionNumber').innerHTML= "<strong>"+response.data.version+"</strong>";
			
	}


	/*will be uncommented when the feature is added*****************************************/
	/**
	 * function to change the theme
	 */
	
	function themeChanged(value){	
		ATRAD.theme.changetheme(value);
	}
	function gotoMobile(value){	
		var jscookie = document.cookie.split(';');
var watchId='';
		for(q=0;q<jscookie.length;q++){
			var x=jscookie[q].split('=');
				//role='Advisor';
			if(x[0].trim()=='watchID'){
				watchId=x[1].trim();
				break;
			}
			
		}
		window.location="view/mobile/watch/watch.html?username=Dependra&watchId="+watchId;
	}

	function goToNormalTicker(){
		dojo.byId('tickertheme').href = '';
	}
	function goToLargeTicker(){
		dojo.byId('tickertheme').href = "theme/html/tickerLarge.css";
	}
	/******************************************/
	
/********************************************/
	
	/**
	 * invoke this when successfully select the security for add security to watch 
	 */
	function addsecurityCallback(security){		
		watch.handleaddSecurity(security);
			
	}

	/*will be uncommented when the feature is added*****************************************/
	/*
	function closeSettingMenu(){
		atradPageSettingsMenu.closeSettingMenu();
	}
	******************************************/

	/*will be uncommented when the feature is added*****************************************/
	/*function closeSettingMenu(e){
		
	if (isChrome) {
			if (e.srcElement.id != "settingsMenu") {
				atradPageSettingsMenu.closeSettingMenu();
			}
		} else {
		if (e.target.id != "settingsMenu") {
			atradPageSettingsMenu.closeSettingMenu();
		}
	}
}*/
	/******************************************/

	/**
	 * invoke this when add security button in home clicked 
	 */
	function addsecurity() {
	
	if (!watch.isDafaultSecurtiylistActive()) {
			var message = 'You can add securities only to the dafault watch list.';
			var errorDisplay = new ATRAD.ErrorPanel();
			errorDisplay.setType(1);
			errorDisplay.setContentMessage(message);
			errorDisplay.setHeight("120px");
			errorDisplay.setLength("400px");
			errorDisplay.show();
		} else if (ATRAD.Watch.isQuickWatchEnabled == true) {
			var message = "You cannot add securities to watch filter";
			var errorDisplay = new ATRAD.ErrorPanel();
			errorDisplay.setContentMessage(message);
			errorDisplay.setHeight("120px");
			errorDisplay.setLength("500px");
			errorDisplay.show();
		} else {/*add security clicked for the first time*/		
			var callAddSecFunc = addsecurityCallback;
			secSelectionWindow.status = "WATCH";
			secSelectionWindow.display('multiple', callAddSecFunc);
		}
	};


	function setFullScreen(){
	    if ((document.fullScreenElement && document.fullScreenElement !== null) ||    
	    	       (!document.mozFullScreen && !document.webkitIsFullScreen)) {
	    	    if (document.documentElement.requestFullScreen) {  
	    	      document.documentElement.requestFullScreen();  
	    	    } else if (document.documentElement.mozRequestFullScreen) {  
	    	      document.documentElement.mozRequestFullScreen();  
	    	    } else if (document.documentElement.webkitRequestFullScreen) {  
	    	      document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
	    	    }
	    	  } else {  
	    	    if (document.cancelFullScreen) {  
	    	      document.cancelFullScreen();  
	    	    } else if (document.mozCancelFullScreen) {  
	    	      document.mozCancelFullScreen();  
	    	    } else if (document.webkitCancelFullScreen) {  
	    	      document.webkitCancelFullScreen();  
	    	    }  
	    	  }
		watch.fullScreenHandler();
		
		if (document.getElementById("butFullScreen").title=="Full Screen"){ 
			document.getElementById("butFullScreen").title="Restore";
		}
		else{
		document.getElementById("butFullScreen").setAttribute('title',"Full Screen");
		}
	}

	function FullScreenToggle(el){
	    if(el.className!="ns")
	    {
	        el.className="ns";
	    }
	    else if(el.className=="ns")
	    {
	        el.className="fs";
	    }
	    
	    return false;
	}
	
	

	function clickEventHandler(event) {

	};

	dojo.addOnLoad(function() {
		isOpera = !!window.opera || navigator.userAgent.indexOf('Opera') >= 0;
		isFirefox = typeof InstallTrigger !== 'undefined'; /* Firefox 1.0+*/
		isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf(
				'Constructor') > 0;
		isChrome = !!window.chrome;

		GLOBAL_CONTROLLER = new ATRAD.GlobalController();
		GLOBAL_CONTROLLER.init();

		/*ticker initialization*/
		ticker = new ATRAD.Ticker();
		ticker.initTicker();

		/*watch initialization*/
		watch = new ATRAD.Watch();
		watch.watch_time =
	3000;
		watch.initWatch();
		

	
		/*Menu bar creation*/
		var targetdiv="homeMenuBar";		
		var logoutFun=logout;
		var fullScreenFun=setFullScreen;
		var atradMenuBar= new ATRAD.MenuBar(targetdiv);		
		atradMenuBar.displayMenuBar();
		secSelectionWindow =GLOBAL_CONTROLLER.returnSelectionnWindow();

		var clickSettings = clickEventHandler;
		
		/*Ticker Updates*/
		lastUpdatedId=ticker.getLastupdatedTickerId();
		var url = "market?action=getTickerData&format=json&tickerId="+lastUpdatedId;	
		var handleAs = "json";	
		var errorIns1 = new ATRAD.ErrorPanel();
		var callbackFun = ticker.updateTicker;
		ajaxConnection = new ATRAD.AJAXConnection(url, callbackFun, handleAs,-1, errorIns1);
			
			
		dojo.byId('lblUserName').innerHTML = "<strong>"+"Dependra"+"</strong>";
		dojo.connect(dijit.byId("butUserLogOut"), "onClick", logoutFun);
		dojo.connect(dijit.byId("butFullScreen"), "onClick", fullScreenFun);
		dojo.connect(dijit.byId("settingsMenu"), "onClick", clickSettings);
		

		
		
		dojo.query(".hasShadow").forEach(function(n) {
			var foo = new dojox.fx.Shadow({
				node : n
			});
			foo.startup();

			if (++randInt % 2 === 0) {
				/*var tmp = new dojo.dnd.Moveable(n);//this enable component to move*/
			}
			setTimeout(dojo.hitch(foo, "resize"), 4000);
			/*setTimeout(dojo.hitch(foo,"setOpacity","0.6",{ duration: 500 }),2000);*/
			dojo.connect(n, "onmouseover", dojo.hitch(foo, function() {
				this.setOpacity(1);
			}));
			dojo.connect(n, "onmouseout", dojo.hitch(foo, function() {
				if (!dojo.isIE) {
					this.setOpacity(0.5);
				}
			}));
			
			});
		
		 
		/*Ticker Updates*/
		syncTickerData();
		
		/*get version number*/
		getVersion();

		
		setSecurityToQucikWatch();
		syncJbossTime();
	});
	
	/*session out due to inactivity of user */
	
	var sessionTimeout =  300000;
	var timeoutTimer;
	
	function resetTimeout() {
		  clearTimeout(timeoutTimer);
		  timeoutTimer = setTimeout(logout, sessionTimeout);
	}
	
	document.addEventListener("mousemove", resetTimeout);
	
	
	/*user logout function*/
	function logout(){
		clearInterval(setInterval(syncJbossTime, 300000));
		window.location = 'login?action=logout&format=html';		
	}

	/*function to get the market status*/
	function getMarketStatus(){
		var url="home?action=marketStatus";
		var callbackFun = setMarketStatus;
		var handleAs = "json";
        var errorIns1=new ATRAD.ErrorPanel();	
		var ajaxConnection = new ATRAD.AJAXConnection(url, callbackFun, handleAs,-1,errorIns1);
		ajaxConnection.RequestPoolData();
		}

	/*function to get the market status*/
	function getUserStatus(){
		var url="login?action=checkUserSession&format=json&txtUserName="+"Dependra";
		var callbackFun = getUserStatusCallback;
		var handleAs = "json";
        var errorIns1=new ATRAD.ErrorPanel();	
		var ajaxConnection = new ATRAD.AJAXConnection(url, callbackFun, handleAs,-1,errorIns1);
		ajaxConnection.RequestData();
		}

	function getUserStatusCallback(responseText){
		if(responseText.data.validation=='false'){
			clearInterval(userStatus);
		}
	}

	
	/*callback method for getMarketStatus*/
	function setMarketStatus(responseText){
		
		if(responseText.data.status!=null && responseText.data.status=="Close"){
			dojo.byId('lblMarketStatus').innerHTML= "<font color='red'><strong>"+responseText.data.status+"</strong></font>";
			return;
		}
		dojo.byId('lblMarketStatus').innerHTML= "<strong>"+responseText.data.status+"</strong>";

		
	}
	
	/*to get CSE announcement*/ 
	function cseAnnouncement(){
		GLOBAL_CONTROLLER.action('MENU','ANNOUNCEMENT','NEPSE','OK');		
	}

	/*to get BROKER announcement*/  
	function brokerAnnouncement(){
		GLOBAL_CONTROLLER.action('MENU','ANNOUNCEMENT','BROKER','OK');		
	}

	/*to get BROKER announcement*/  
	function getManagerApprovals(){
		GLOBAL_CONTROLLER.action('MENU','MANAGERAPPROVAL',null,'OK');		
	}
	
	function init() {	
		/*will be uncommented when the feature is added*****************************************/
		/*Setting menu display*/				
		var settingTargetdiv="settingsMenu";		
		var themeFormSubFun=themeChanged;
		var langFormSubFun=submitLanguageform;
		atradPageSettingsMenu= new ATRAD.PageSettingsMenu(settingTargetdiv,themeFormSubFun,langFormSubFun,goToNormalTicker,goToNormalTicker,goToLargeTicker);	
		atradPageSettingsMenu.displayMenuBar();	
		/******************************************/
		/*will be uncommented when the feature is added*****************************************/ 	
		ATRAD.theme.initpage(); 	
		getRefreshTime();			
		/*to set the time intervals*/ 
		/*initializeTimer();*/	
		
		/*to load broker data*/ 
		getBrokerInfoData();
		/*to get market status*/ 
		getMarketStatus();		
		setFullScreen();
	}	
	window.onload = init;	

	
	var language = new ATRAD.ClientMsgTranslator();

	/*will be uncommented when the feature is added*****************************************/ 	
	
	function submitLanguageform(value) {

		document.getElementById("lancoun").value = value;
		document.forms["languageform"].submit();
	}	
	/******************************************/
		
	function process(response) {
		ticker.updateTicker(response);
	}	

	/*to set the time intervals*/ 
	function initializeTimer() {
		var tickerData = setInterval(syncTickerData, ticker_time);
		var market = setInterval(getMarketStatus, 1000);
		var jbossTime = setInterval(syncJbossTime, 300000);
		var userStatus = setInterval(getUserStatus, 1000);
	}

	/*function to get the market status*/
	function getRefreshTime(){
		/*var url="home?action=getRefreshTime&format=json&setting=ticker_time";
		var callbackFun = setRefreshTime;
		var handleAs = "json";
        var errorIns1=new ATRAD.ErrorPanel();	
		var ajaxConnection = new ATRAD.AJAXConnection(url, callbackFun, handleAs,-1,errorIns1);
		ajaxConnection.RequestData();
		}
	function setRefreshTime(response){
		if(response.data.setting !=null && response.data.setting.length>0){
			ticker_time=response.data.setting;
			}

		*/
		ticker_time=2000;
		initializeTimer();
		resetTimeout();
	}
	
	/*method to get ticker data*/ 
	function syncTickerData() {
		
		lastUpdatedId=ticker.getLastupdatedTickerId();
		ajaxConnection.setURL("market?action=getTickerData&format=json&tickerId="+lastUpdatedId);
		ajaxConnection.RequestPoolData();
	}

	/*method to load help pdf*/ 
	function displayHelp(){
		window.open('./view/help/help.pdf', '_blank','resizable,scrollbars');
	}
	
	/*method to load broker data*/
	 function getBrokerInfoData() {
		var broker='NEP';
		var lang='English';
		var url = "res/"+broker+lang+"Home.html";
		var callbackFun = setBrokerInfoData;
		var handleAs = "text";
		var errorIns1 = new ATRAD.ErrorPanel();
		var ajaxConnection = new ATRAD.AJAXConnection(url, callbackFun,
				handleAs, -1, errorIns1);
		ajaxConnection.RequestData();
	}

	/*callbackmethod to getBrokerInfoData*/
	function setBrokerInfoData(responseText) {
		var targetNode = dojo.byId("loginBrokerinfoframe");
		/*replace end oof line charactors*/
		responseText = responseText.replace(/\n/g, "");
		/*Replace tabs*/
		responseText = responseText.replace(/\t/g, "");
		targetNode.innerHTML = responseText;
	}

	dojo.addOnLoad(function(){
	    showPreloader();
	    dojo.parser.parse();
	    hidePreloader();
	});
	
	function syncJbossTime(){
		var url="home?action=getJBossTime&format=json";
		var callbackFun = syncJbossTimeCallBack;
		var handleAs = "json";
        var errorIns1=new ATRAD.ErrorPanel();	
		var ajaxConnection = new ATRAD.AJAXConnection(url, callbackFun, handleAs,-1,errorIns1);
		ajaxConnection.RequestData();
	};

	function syncJbossTimeCallBack(response){
		timeDifference=new Date().getTime()- response.data.jbossTime;
		var currentTime=new Date(new Date().getTime()-timeDifference);
		setTimer(currentTime);
	}

	function setTimer(displayTime){
		var h = displayTime.getHours();
		var m = displayTime.getMinutes();
		var s = displayTime.getSeconds();
		// add a zero in front of numbers<10
		m = checkTime(m);
		s = checkTime(s);
		document.getElementById('clock').innerHTML = h + ":" + m + ":" + s;
		
		
		var currentTime=new Date(new Date().getTime()-timeDifference);
		t = setTimeout(function(){ setTimer(currentTime); }, 1000);

		//var message = "Test popup baloon";
		//var alertDisplay = new ATRAD.AlertsViwer();
		//alertDisplay.init();
		//alertDisplay.show();
	}
		
	var hidePreloader = function(){
	    /* This really hides the preloader*/
	    var hide = function(){
	        dojo.fadeOut({
	                node:"preloader",
	                duration:700,
	                onEnd: function(){
	                    dojo.style("preloader", "display", "none");
	                }
	        }).play();
	    };
	 
	    /* Set a timeout to ensure the preloader is visible.
	     This is only for testing !!!*/
	    //setTimeout(hide, 5000);
	    hide();
	};

	function showPreloader() {
	    /* Show the preloader centered in the viewport*/
	    var ps = dojo.position('preloaderContent');
	    var ws = dojo.window.getBox();
	    dojo.style("preloaderContent", "top" , (ws.h/2-ps.h/2)+"px");
	    dojo.style("preloaderContent", "left", (ws.w/2-ps.w/2)+"px");
	    dojo.style("preloaderContent", "visibility" , "visible");
	};


	function checkTime(i) {
		if (i < 10) {
			i = "0" + i;
		}
		return i;
	}
	
	/*$(document).load(function() {
	$('#loading').show();
	$('#ItopWrap').hide();
});

$(document).ready(function() {
	$('#loading').hide();
	$('#ItopWrap').show();
});*/

/*$('#ItopWrap').onload=function(){
	$('#ItopWrap').show();
	$('#loading').hide();
};*/

	/*will be uncommented when the feature is added*****************************************/ 
	/*document.onclick=closeSettingMenu;*/
</script>
</head>

<!-- Page body start here -->
<body class="claro" id="home">

<script src="theme/html/scripts/highstockcharts/highstock.js"></script>
<script src="theme/html/scripts/highstockcharts/modules/exporting.js"></script>

	<div id="preloader">
	    <div id="preloaderContent" style="visibility: hidden;">
	        <strong>This is your preloader... </strong><br />
	        <img id="loading-image" src="theme/html/white/atrad/images/InProgress.gif" alt="Loading..." />       
	    </div>
	</div>

	<!-- start the body wraper -->
	<div id="ItopWrap">
		<div id="Iwrapper" >
			<div id="Icontainer">
				<div id="main">
					<!-- page header start here -->
					<div id="NaviMaster">
					<!-- upper mesage bar starts here -->
					<div id="userControl">

						<div calss="userControl">
<!--							<div class="adjustSettings">-->
<!--								<a href="#"><img-->
<!--									src="theme/html/white/atrad/images/settingIcon.png"-->
<!--									class="settings" onclick="settingsMenu();">-->
<!--								</a>-->
<!--							</div>-->
<!--	-->
<!--							<div class="adjustSeperator">-->
<!--								<img src="theme/html/white/atrad/images/userSep.gif"-->
<!--									class="homeSeperator">-->
<!--							</div>-->
							<div class="adjustHelp">
								<a href="#">
								<div class="helpPdf" onclick="displayHelp();"></div>
								</a>
							</div>

<!--							 will be uncommented when the feature is added-->
							  <div style="float:right; height:18px; width:2px; margin:4px 5px 0 5px"><img width="2" height="18" class="usrSepartor"></div>
							  <div style="cursor:pointer;width:18px; height:18px; float:right; margin:4px 0;" id="settingsMenu" class="settingsMenuImg"></div> 


							<div class="adjustSeperator">
								<div class="homeSeperator"></div>
							</div>
							<div class="adjustBrokerAnnouncement">
								<strong><a href="#" class="whiteTextLink"
									id="butBrokerAnc" onclick="brokerAnnouncement(); ">Broker</a>
								</strong>
							</div>
							<div id="brokerMsg" class="announcementMessageIcon">
								<div class="whiteTextSmall" id="brokerMsgCount"></div>
							</div>

							<div class="adjustSeperator">
								<div class="homeSeperator"></div>
							</div>
							<div class="adjustBrokerAnnouncement" id="butCseAnc">
								<strong><a href="#" class="whiteTextLink"
									onclick="cseAnnouncement();">NEPSE</a>
								</strong>
							</div>
							<div id="cseMsg" class="announcementMessageIcon">
								<div class="whiteTextSmall" id="cseMsgCount"></div>
							</div>

							<div class="adjustSeperator">
								<div class="homeSeperator"></div>
							</div>
							<div style="float: right">
								<button data-dojo-type="dijit.form.Button" onclick="return false;"   id="butUserLogOut">&nbsp;Logout&nbsp;</button>
							</div>

							<div class="HomeLblUsername whiteText" 
								id="lblUserName"></div>
							<div
								class="adjsutUserIcon">
								<div class="userIcon"></div>
							</div>
							<div class="adjustSeperator">
								<div class="homeSeperator"></div>
							</div>
							<div class="limegreen adjustBrokerAnnouncement">
								<span class="whiteText">Market :</span><span
									id="lblMarketStatus"></span>
							</div>
							<div
								class="marketIcon"					
									width="15" height="16">
							</div>
							 <div class="adjustSeperator">
<!--								<img src="theme/html/white/atrad/images/userSep.gif"-->
<!--									class="homeSeperator">-->
							</div>
							<div>
<!--							<button class="fullScreen" data-dojo-type="dijit.form.Button" onclick= "return false;" id="butFullScreen">&nbsp;FullScreen&nbsp;</button>-->
							<span class="fullScreen" data-dojo-type="dijit.form.Button" id="butFullScreen">
								<input type="image" class="ns"  onclick="FullScreenToggle(this);" value="" />
							</span>
							</div>
							
							
						</div>
					</div>
					<!-- upper mesage bar ends here -->
					
					<!-- will be uncommented when the feature is added-->
					<!-- <div id="content">
						<form name="frm" id="languageform" method="post"
							action="language?action=changeLanguageShowHome&format=html">
							<input type="hidden" value="" id="lancoun" name="coun" />
						</form>
					</div> -->
					
					<div id="mainNavi">
					<!--	<span> <lable id="brokerAnn" style="float: left"></lable></span>
						<span> <lable id="brokerAnn" style="float: right"></lable></span>-->
							<div class="main">
								<div class="menuBarAdjusty">
									
								</div>
								<div class="homeMenuBarMid">
									<div dojoType="dijit.MenuBar" id="navMenu">
										<div class="inline" id="homeMenuBar"></div>

									</div>
								</div>
								<div class="menuBarAdjusty">
								
														
									
									
								</div>
								
								
							</div>
						</div>
					
					</div>
					<!-- ticker grid starts here -->
					<div id="watchBoard">
<div id="watchStatusBar">
							<div class="main">
								<div id="indexes"></div>
								<div class="clear"></div>
							</div>
						</div>
						<!-- for cash map  -->
						<div id="watchStatusBar">
							<div class="main">
							</div>
						</div>
						
						<div id="gridContainer4" style="height:85px"></div>

						
					</div>
					<!-- ticker grid ends here -->
					
					 <!--menu bar starts here -->	
					<div id="watchShadow">
					<!--<div id="mainNavi2">
						<div class="main">
								<div class="menuBarAdjusty">
									<img src="theme/html/white/atrad/images/mainMenuL2.png">
								</div>
								<div class="homeMenuBarMid2">
									
									<div class="inline" style="font-weight: bold; padding:6px 10px;">Watch Filter:</div>
										 <input	id="cmbSecurityHome" name="txtSecurity" 
							dojoType="dijit.form.ComboBox"  trim="true"  
       	invalidMessage="Invalid security code."  style="width:180px;" uppercase="true" autoComplete="false"></input>
		<button id="btnHomeClear" dojoType="dijit.form.Button" title="Clear">C</button>								
									
								</div>
								<div class="menuBarAdjusty">
								<img src="theme/html/white/atrad/images/mainMenuR2.png"/>
														
									
									
								</div>
								
								
							</div>
						</div>-->
						
						
							
						
						<div class="clear"></div>
					</div>
				</div>
				<div class="clear"></div>

				<div class="clear"></div>
			</div>
		</div>
		<!-- menu bar ends here -->
		
		
		<!-- watch container strats here -->

		<div id="watchContainer" class="watchContainer">
			<div id="watchCollapsibleMenu"></div>
			<div class="watchGridContainer2" id="watchGridContainer" ></div>
		</div>
		
		<!-- watch container ends here-->


		<!-- footer strats here-->
		<div class="clear"></div>
		<div class="clearFooter"></div>
		<div class="clear"></div>
		<div id="footer">
			<div class="main">
				<span id="loginBrokerinfoframe"></span>
				<table height="9px"></table>
				<div id="copyM">
					<div class="lightBlueText companyName"><span class="whiteText">Visit us :</span>
						<a href="https://atradsolutions.com/" target="_blank"
							class="lightBlueText">atradsolutions.com</a>
					</div>
					<div class="footSeperatorAdjust3">
						<div class="footSeperator"></div>
					</div>
					<div class="footerLogoAdjust">
						<div class="footerLogo"> </div>
					</div>
					<div class="lightBlueText footerYear">©</div>
					<div class="footSeperatorAdjust3">
						<div class="footSeperator"></div>
					</div>
					<div class="lightBlueText companyName">
						<span class="whiteText"> &nbsp;version :</span><span id="versionNumber"></span>
					</div>
					<div class="lightBlueText companyName" style="font-weight:bold">
						<span class="">ATrad Premier </span>
					</div>

				</div>
				
				<div id='copyR'>
					<div class="lightBlueText companyName" style="font-weight:bold">
					 <span class='whiteText'>Server Time:</span> <span class="lightBlueText" id="clock" ></span>
					</div>
				</div>
			</div>
		</div>
	</div>
<!-- footer ends here-->

</body>
</html>
