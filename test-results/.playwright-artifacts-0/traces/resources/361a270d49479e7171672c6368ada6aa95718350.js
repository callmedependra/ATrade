define("dijit/layout/StackContainer",["dojo","dijit","dijit/_Templated","dijit/layout/_LayoutWidget","i18n!dijit/nls/common","dojo/cookie","dijit/layout/StackController"],function(a,b){a.declare("dijit.layout.StackContainer",b.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);a.addClass(this.domNode,"dijitLayoutContainer");b.setWaiRole(this.containerNode,"tabpanel");},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var c=this.getChildren();a.forEach(c,this._setupChild,this);if(this.persist){this.selectedChildWidget=b.byId(a.cookie(this.id+"_selectedChild"));}else{a.some(c,function(e){if(e.selected){this.selectedChildWidget=e;}return e.selected;},this);}var d=this.selectedChildWidget;if(!d&&c[0]){d=this.selectedChildWidget=c[0];d.selected=true;}a.publish(this.id+"-startup",[{children:c,selected:d}]);this.inherited(arguments);},resize:function(){var c=this.selectedChildWidget;if(c&&!this._hasBeenShown){this._hasBeenShown=true;this._showChild(c);}this.inherited(arguments);},_setupChild:function(c){this.inherited(arguments);a.replaceClass(c.domNode,"dijitHidden","dijitVisible");c.domNode.title="";},addChild:function(d,c){this.inherited(arguments);if(this._started){a.publish(this.id+"-addChild",[d,c]);this.layout();if(!this.selectedChildWidget){this.selectChild(d);}}},removeChild:function(d){this.inherited(arguments);if(this._started){a.publish(this.id+"-removeChild",[d]);}if(this._beingDestroyed){return;}if(this.selectedChildWidget===d){this.selectedChildWidget=undefined;if(this._started){var c=this.getChildren();if(c.length){this.selectChild(c[0]);}}}if(this._started){this.layout();}},selectChild:function(e,c){e=b.byId(e);if(this.selectedChildWidget!=e){var f=this._transition(e,this.selectedChildWidget,c);this._set("selectedChildWidget",e);a.publish(this.id+"-selectChild",[e]);if(this.persist){a.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}return f;},_transition:function(f,e,c){if(e){this._hideChild(e);}var g=this._showChild(f);if(f.resize){if(this.doLayout){f.resize(this._containerContentBox||this._contentBox);}else{f.resize();}}return g;},_adjacent:function(d){var e=this.getChildren();var c=a.indexOf(e,this.selectedChildWidget);c+=d?1:e.length-1;return e[c%e.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyPress:function(c){a.publish(this.id+"-containerKeyPress",[{e:c,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox||this._contentBox);}},_showChild:function(d){var c=this.getChildren();d.isFirstChild=(d==c[0]);d.isLastChild=(d==c[c.length-1]);d._set("selected",true);a.replaceClass(d.domNode,"dijitVisible","dijitHidden");return d._onShow()||true;},_hideChild:function(c){c._set("selected",false);a.replaceClass(c.domNode,"dijitHidden","dijitVisible");c.onHide();},closeChild:function(d){var c=d.onClose(this,d);if(c){this.removeChild(d);d.destroyRecursive();}},destroyDescendants:function(c){a.forEach(this.getChildren(),function(d){this.removeChild(d);d.destroyRecursive(c);},this);}});a.extend(b._Widget,{selected:false,closable:false,iconClass:"",showTitle:true});return b.layout.StackContainer;});