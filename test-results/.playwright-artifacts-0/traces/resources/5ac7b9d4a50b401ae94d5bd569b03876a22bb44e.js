define("dijit/_base/typematic",["dojo","dijit"],function(a,b){b.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(a.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(c,j,f,i,h,e,g,d){if(h!=this._obj){this.stop();this._initialDelay=g||500;this._subsequentDelay=e||0.9;this._minDelay=d||10;this._obj=h;this._evt=c;this._node=f;this._currentTimeout=-1;this._count=-1;this._callback=a.hitch(j,i);this._fireEventAndReload();this._evt=a.mixin({faux:true},c);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(f,c,i,h,e,g,d){if(c.keyCode){c.charOrCode=c.keyCode;a.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(c.charCode){c.charOrCode=String.fromCharCode(c.charCode);a.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return[a.connect(f,"onkeypress",this,function(j){if(j.charOrCode==c.charOrCode&&(c.ctrlKey===undefined||c.ctrlKey==j.ctrlKey)&&(c.altKey===undefined||c.altKey==j.altKey)&&(c.metaKey===undefined||c.metaKey==(j.metaKey||false))&&(c.shiftKey===undefined||c.shiftKey==j.shiftKey)){a.stopEvent(j);b.typematic.trigger(j,i,f,h,c,e,g,d);}else{if(b.typematic._obj==c){b.typematic.stop();}}}),a.connect(f,"onkeyup",this,function(j){if(b.typematic._obj==c){b.typematic.stop();}})];},addMouseListener:function(f,i,h,e,g,d){var c=a.connect;return[c(f,"mousedown",this,function(j){a.stopEvent(j);b.typematic.trigger(j,i,f,h,f,e,g,d);}),c(f,"mouseup",this,function(j){a.stopEvent(j);b.typematic.stop();}),c(f,"mouseout",this,function(j){a.stopEvent(j);b.typematic.stop();}),c(f,"mousemove",this,function(j){j.preventDefault();}),c(f,"dblclick",this,function(j){a.stopEvent(j);if(a.isIE){b.typematic.trigger(j,i,f,h,f,e,g,d);setTimeout(a.hitch(this,b.typematic.stop),50);}})];},addListener:function(g,h,c,j,i,e,f,d){return this.addKeyListener(h,c,j,i,e,f,d).concat(this.addMouseListener(g,j,i,e,f,d));}};return b.typematic;});