define("dijit/_Templated",["dojo","dijit","dijit/_Widget","dojo/string","dojo/parser","dojo/cache"],function(a,b){a.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(c){var d=this.declaredClass,e=this;return a.string.substitute(c,this,function(g,f){if(f.charAt(0)=="!"){g=a.getObject(f.substr(1),false,e);}if(typeof g=="undefined"){throw new Error(d+" template:"+f);}if(g==null){return"";}return f.charAt(0)=="!"?g:g.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var d=b._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var e;if(a.isString(d)){e=a._toDom(this._stringRepl(d));if(e.nodeType!=1){throw new Error("Invalid template: "+d);}}else{e=d.cloneNode(true);}this.domNode=e;this.inherited(arguments);this._attachTemplateNodes(e);if(this.widgetsInTemplate){var c=(this._startupWidgets=a.parser.parse(e,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"}));this._supportingWidgets=b.findWidgets(e);this._attachTemplateNodes(c,function(g,f){return g[f];});}this._fillContent(this.srcNodeRef);},_fillContent:function(d){var c=this.containerNode;if(d&&c){while(d.hasChildNodes()){c.appendChild(d.firstChild);}}},_attachTemplateNodes:function(f,i){i=i||function(t,s){return t.getAttribute(s);};var d=a.isArray(f)?f:(f.all||f.getElementsByTagName("*"));var m=a.isArray(f)?0:-1;for(;m<d.length;m++){var e=(m==-1)?f:d[m];if(this.widgetsInTemplate&&(i(e,"dojoType")||i(e,"data-dojo-type"))){continue;}var g=i(e,"dojoAttachPoint")||i(e,"data-dojo-attach-point");if(g){var n,p=g.split(/\s*,\s*/);while((n=p.shift())){if(a.isArray(this[n])){this[n].push(e);}else{this[n]=e;}this._attachPoints.push(n);}}var l=i(e,"dojoAttachEvent")||i(e,"data-dojo-attach-event");if(l){var c,q=l.split(/\s*,\s*/);var h=a.trim;while((c=q.shift())){if(c){var j=null;if(c.indexOf(":")!=-1){var r=c.split(":");c=h(r[0]);j=h(r[1]);}else{c=h(c);}if(!j){j=c;}this._attachEvents.push(this.connect(e,c,j));}}}var k=i(e,"waiRole");if(k){b.setWaiRole(e,k);}var o=i(e,"waiState");if(o){a.forEach(o.split(/\s*,\s*/),function(t){if(t.indexOf("-")!=-1){var s=t.split("-");b.setWaiState(e,s[0],s[1]);}});}}},startup:function(){a.forEach(this._startupWidgets,function(c){if(c&&!c._started&&c.startup){c.startup();}});this.inherited(arguments);},destroyRendering:function(){a.forEach(this._attachPoints,function(c){delete this[c];},this);this._attachPoints=[];a.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});b._Templated._templateCache={};b._Templated.getCachedTemplate=function(g,h,k){var j=b._Templated._templateCache;var c=h||g;var d=j[c];if(d){try{if(!d.ownerDocument||d.ownerDocument==a.doc){return d;}}catch(i){}a.destroy(d);}if(!h){h=a.cache(g,{sanitize:true});}h=a.string.trim(h);if(k||h.match(/\$\{([^\}]+)\}/g)){return(j[c]=h);}else{var f=a._toDom(h);if(f.nodeType!=1){throw new Error("Invalid template: "+h);}return(j[c]=f);}};if(a.isIE){a.addOnWindowUnload(function(){var c=b._Templated._templateCache;for(var d in c){var e=c[d];if(typeof e=="object"){a.destroy(e);}delete c[d];}});}a.extend(b._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});return b._Templated;});