define("dojo/number",["dojo","dojo/i18n","i18n!dojo/cldr/nls/number","dojo/string","dojo/regexp"],function(a){a.getObject("number",true,a);a.number.format=function(f,d){d=a.mixin({},d||{});var b=a.i18n.normalizeLocale(d.locale),c=a.i18n.getLocalization("dojo.cldr","number",b);d.customs=c;var e=d.pattern||c[(d.type||"decimal")+"Format"];if(isNaN(f)||Math.abs(f)==Infinity){return null;}return a.number._applyPattern(f,e,d);};a.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;a.number._applyPattern=function(g,f,j){j=j||{};var h=j.customs.group,c=j.customs.decimal,b=f.split(";"),i=b[0];f=b[(g<0)?1:0]||("-"+i);if(f.indexOf("%")!=-1){g*=100;}else{if(f.indexOf("\u2030")!=-1){g*=1000;}else{if(f.indexOf("\u00a4")!=-1){h=j.customs.currencyGroup||h;c=j.customs.currencyDecimal||c;f=f.replace(/\u00a4{1,3}/,function(k){var l=["symbol","currency","displayName"][k.length-1];return j[l]||j.currency||"";});}else{if(f.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var e=a.number._numberPatternRE;var d=i.match(e);if(!d){throw new Error("unable to find a number expression in pattern: "+f);}if(j.fractional===false){j.places=0;}return f.replace(e,a.number._formatAbsolute(g,d[0],{decimal:c,group:h,places:j.places,round:j.round}));};a.number.round=function(e,c,b){var d=10/(b||10);return(d*+e).toFixed(c)/d;};if((0.9).toFixed()==0){(function(){var b=a.number.round;a.number.round=function(f,g,c){var h=Math.pow(10,-g||0),e=Math.abs(f);if(!f||e>=h||e*Math.pow(10,g+1)<5){h=0;}return b(f,g,c)+(f>0?h:-h);};})();}a.number._formatAbsolute=function(l,j,q){q=q||{};if(q.places===true){q.places=0;}if(q.places===Infinity){q.places=6;}var c=j.split("."),r=typeof q.places=="string"&&q.places.indexOf(","),p=q.places;if(r){p=q.places.substring(r+1);}else{if(!(p>=0)){p=(c[1]||[]).length;}}if(!(q.round<0)){l=a.number.round(l,p,q.round);}var i=String(Math.abs(l)).split("."),g=i[1]||"";if(c[1]||q.places){if(r){q.places=q.places.substring(0,r);}var f=q.places!==undefined?q.places:(c[1]&&c[1].lastIndexOf("0")+1);if(f>g.length){i[1]=a.string.pad(g,f,"0",true);}if(p<g.length){i[1]=g.substr(0,p);}}else{if(i[1]){i.pop();}}var n=c[0].replace(",","");f=n.indexOf("0");if(f!=-1){f=n.length-f;if(f>i[0].length){i[0]=a.string.pad(i[0],f);}if(n.indexOf("#")==-1){i[0]=i[0].substr(i[0].length-f);}}var h=c[0].lastIndexOf(","),m,b;if(h!=-1){m=c[0].length-h-1;var o=c[0].substr(0,h);h=o.lastIndexOf(",");if(h!=-1){b=o.length-h-1;}}var e=[];for(var k=i[0];k;){var d=k.length-m;e.push((d>0)?k.substr(d):k);k=(d>0)?k.slice(0,d):"";if(b){m=b;delete b;}}i[0]=e.reverse().join(q.group||",");return i.join(q.decimal||".");};a.number.regexp=function(b){return a.number._parseInfo(b).regexp;};a.number._parseInfo=function(j){j=j||{};var g=a.i18n.normalizeLocale(j.locale),k=a.i18n.getLocalization("dojo.cldr","number",g),e=j.pattern||k[(j.type||"decimal")+"Format"],h=k.group,d=k.decimal,f=1;if(e.indexOf("%")!=-1){f/=100;}else{if(e.indexOf("\u2030")!=-1){f/=1000;}else{var c=e.indexOf("\u00a4")!=-1;if(c){h=k.currencyGroup||h;d=k.currencyDecimal||d;}}}var b=e.split(";");if(b.length==1){b.push("-"+b[0]);}var i=a.regexp.buildGroupRE(b,function(l){l="(?:"+a.regexp.escapeString(l,".")+")";return l.replace(a.number._numberPatternRE,function(q){var n={signed:false,separator:j.strict?h:[h,""],fractional:j.fractional,decimal:d,exponent:false},p=q.split("."),o=j.places;if(p.length==1&&f!=1){p[1]="###";}if(p.length==1||o===0){n.fractional=false;}else{if(o===undefined){o=j.pattern?p[1].lastIndexOf("0")+1:Infinity;}if(o&&j.fractional==undefined){n.fractional=true;}if(!j.places&&(o<p[1].length)){o+=","+p[1].length;}n.places=o;}var m=p[0].split(",");if(m.length>1){n.groupSize=m.pop().length;if(m.length>1){n.groupSize2=m.pop().length;}}return"("+a.number._realNumberRegexp(n)+")";});},true);if(c){i=i.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(l,n,o,p){var q=["symbol","currency","displayName"][o.length-1],m=a.regexp.escapeString(j[q]||j.currency||"");n=n?"[\\s\\xa0]":"";p=p?"[\\s\\xa0]":"";if(!j.strict){if(n){n+="*";}if(p){p+="*";}return"(?:"+n+m+p+")?";}return n+m+p;});}return{regexp:i.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:h,decimal:d,factor:f};};a.number.parse=function(e,b){var d=a.number._parseInfo(b),c=(new RegExp("^"+d.regexp+"$")).exec(e);if(!c){return NaN;}var f=c[1];if(!c[1]){if(!c[2]){return NaN;}f=c[2];d.factor*=-1;}f=f.replace(new RegExp("["+d.group+"\\s\\xa0]","g"),"").replace(d.decimal,".");return f*d.factor;};a.number._realNumberRegexp=function(b){b=b||{};if(!("places" in b)){b.places=Infinity;}if(typeof b.decimal!="string"){b.decimal=".";}if(!("fractional" in b)||/^0/.test(b.places)){b.fractional=[true,false];}if(!("exponent" in b)){b.exponent=[true,false];}if(!("eSigned" in b)){b.eSigned=[true,false];}var c=a.number._integerRegexp(b),f=a.regexp.buildGroupRE(b.fractional,function(h){var g="";if(h&&(b.places!==0)){g="\\"+b.decimal;if(b.places==Infinity){g="(?:"+g+"\\d+)?";}else{g+="\\d{"+b.places+"}";}}return g;},true);var d=a.regexp.buildGroupRE(b.exponent,function(g){if(g){return"([eE]"+a.number._integerRegexp({signed:b.eSigned})+")";}return"";});var e=c+f;if(f){e="(?:(?:"+e+")|(?:"+f+"))";}return e+d;};a.number._integerRegexp=function(b){b=b||{};if(!("signed" in b)){b.signed=[true,false];}if(!("separator" in b)){b.separator="";}else{if(!("groupSize" in b)){b.groupSize=3;}}var c=a.regexp.buildGroupRE(b.signed,function(e){return e?"[-+]":"";},true);var d=a.regexp.buildGroupRE(b.separator,function(g){if(!g){return"(?:\\d+)";}g=a.regexp.escapeString(g);if(g==" "){g="\\s";}else{if(g=="\xa0"){g="\\s\\xa0";}}var e=b.groupSize,f=b.groupSize2;if(f){var h="(?:0|[1-9]\\d{0,"+(f-1)+"}(?:["+g+"]\\d{"+f+"})*["+g+"]\\d{"+e+"})";return((e-f)>0)?"(?:"+h+"|(?:0|[1-9]\\d{0,"+(e-1)+"}))":h;}return"(?:0|[1-9]\\d{0,"+(e-1)+"}(?:["+g+"]\\d{"+e+"})*)";},true);return c+d;};return a.number;});