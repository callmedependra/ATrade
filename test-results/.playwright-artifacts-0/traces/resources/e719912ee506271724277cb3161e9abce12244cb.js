define("dijit/form/Select",["dojo","dijit","text!dijit/form/templates/Select.html","dijit/form/_FormSelectWidget","dijit/_HasDropDown","dijit/Menu","dijit/Tooltip","i18n!dijit/form/nls/validate"],function(a,b){a.declare("dijit.form._SelectMenu",b.Menu,{buildRendering:function(){this.inherited(arguments);var c=(this.menuTableNode=this.domNode);var d=(this.domNode=a.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}}));if(c.parentNode){c.parentNode.replaceChild(d,c);}a.removeClass(c,"dijitMenuTable");d.className=c.className+" dijitSelectMenu";c.className="dijitReset dijitMenuTable";b.setWaiRole(c,"listbox");b.setWaiRole(d,"presentation");d.appendChild(c);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",a.stopEvent);},resize:function(c){if(c){a.marginBox(this.domNode,c);if("w" in c){this.menuTableNode.style.width="100%";}}}});a.declare("dijit.form.Select",[b.form._FormSelectWidget,b._HasDropDown],{baseClass:"dijitSelect",templateString:a.cache("dijit.form","templates/Select.html"),attributeMap:a.mixin(a.clone(b.form._FormSelectWidget.prototype.attributeMap),{style:"tableNode"}),required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&nbsp;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var c=this.srcNodeRef.selectedIndex||0;this.value=this.options[c>=0?c:0].value;}this.dropDown=new b.form._SelectMenu({id:this.id+"_menu"});a.addClass(this.dropDown.domNode,this.baseClass+"Menu");},_getMenuItemForOption:function(c){if(!c.value&&!c.label){return new b.MenuSeparator();}else{var e=a.hitch(this,"_setValueAttr",c);var d=new b.MenuItem({option:c,label:c.label||this.emptyLabel,onClick:e,disabled:c.disabled||false});b.setWaiRole(d.focusNode,"listitem");return d;}},_addOptionItem:function(c){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(c));}},_getChildren:function(){if(!this.dropDown){return[];}return this.dropDown.getChildren();},_loadChildren:function(d){if(d===true){if(this.dropDown){delete this.dropDown.focusedChild;}if(this.options.length){this.inherited(arguments);}else{a.forEach(this._getChildren(),function(e){e.destroyRecursive();});var c=new b.MenuItem({label:"&nbsp;"});this.dropDown.addChild(c);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value);}},_setValueAttr:function(c){this.inherited(arguments);a.attr(this.valueNode,"value",this.get("value"));},_setDisplay:function(c){var d=c||this.emptyLabel;this.containerNode.innerHTML='<span class="dijitReset dijitInline '+this.baseClass+'Label">'+d+"</span>";b.setWaiState(this.focusNode,"valuetext",d);},validate:function(c){var e=this.isValid(c);this._set("state",e?"":"Error");b.setWaiState(this.focusNode,"invalid",e?"false":"true");var d=e?"":this._missingMsg;if(this.message!==d){this._set("message",d);b.hideTooltip(this.domNode);if(d){b.showTooltip(d,this.domNode,this.tooltipPosition,!this.isLeftToRight());}}return e;},isValid:function(c){return(!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);b.hideTooltip(this.domNode);this._set("state","");this._set("message","");},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=a.i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",a.stopEvent);},_setStyleAttr:function(c){this.inherited(arguments);a.toggleClass(this.domNode,this.baseClass+"FixedWidth",!!this.tableNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(c){this._loadChildren(true);this._isLoaded=true;c();},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode){this.dropDown.menuTableNode.style.width="";}},uninitialize:function(c){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(c);delete this.dropDown;}this.inherited(arguments);}});return b.form.Select;});