dojo.provide("dojox.html.metrics");(function(){var c=dojox.html.metrics;c.getFontMeasurements=function(){var g={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var i=dojo.doc.createElement("div");var f=i.style;f.position="absolute";f.left="-100px";f.top="0";f.width="30px";f.height="1000em";f.borderWidth="0";f.margin="0";f.padding="0";f.outline="0";f.lineHeight="1";f.overflow="hidden";dojo.body().appendChild(i);for(var h in g){f.fontSize=h;g[h]=Math.round(i.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(i);i=null;return g;};var b=null;c.getCachedFontMeasurements=function(f){if(f||!b){b=c.getFontMeasurements();}return b;};var e=null,d={};c.getTextBox=function(n,k,j){var f,h;if(!e){f=e=dojo.doc.createElement("div");var o=dojo.doc.createElement("div");o.appendChild(f);h=o.style;h.overflow="scroll";h.position="absolute";h.left="0px";h.top="-10000px";h.width="1px";h.height="1px";h.visibility="hidden";h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";dojo.body().appendChild(o);}else{f=e;}f.className="";h=f.style;h.borderWidth="0";h.margin="0";h.padding="0";h.outline="0";if(arguments.length>1&&k){for(var g in k){if(g in d){continue;}h[g]=k[g];}}if(arguments.length>2&&j){f.className=j;}f.innerHTML=n;var l=dojo.position(f);l.w=f.parentNode.scrollWidth;return l;};var a={w:16,h:16};c.getScrollbar=function(){return{w:a.w,h:a.h};};c._fontResizeNode=null;c.initOnFontResize=function(h){var i=c._fontResizeNode=dojo.doc.createElement("iframe");var g=i.style;g.position="absolute";g.width="5em";g.height="10em";g.top="-10000px";if(dojo.isIE){i.onreadystatechange=function(){if(i.contentWindow.document.readyState=="complete"){i.onresize=i.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;}};}else{i.onload=function(){i.contentWindow.onresize=i.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;};}i.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}<\/script></head><body></body></html>'");dojo.body().appendChild(i);c.initOnFontResize=function(){};};c.onFontResize=function(){};c._fontresize=function(){c.onFontResize();};dojo.addOnUnload(function(){var g=c._fontResizeNode;if(g){if(dojo.isIE&&g.onresize){g.onresize=null;}else{if(g.contentWindow&&g.contentWindow.onresize){g.contentWindow.onresize=null;}}c._fontResizeNode=null;}});dojo.addOnLoad(function(){try{var g=dojo.doc.createElement("div");g.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(g);a.w=g.offsetWidth-g.clientWidth;a.h=g.offsetHeight-g.clientHeight;dojo.body().removeChild(g);delete g;}catch(f){}if("fontSizeWatch" in dojo.config&&!!dojo.config.fontSizeWatch){c.initOnFontResize();}});})();