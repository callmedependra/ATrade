define("dijit/layout/ContentPane",["dojo","dijit","dijit/_Widget","dijit/layout/_ContentPaneResizeMixin","dojo/string","dojo/html","i18n!dijit/nls/loading"],function(a,b){a.declare("dijit.layout.ContentPane",[b._Widget,b.layout._ContentPaneResizeMixin],{href:"",extractContent:false,parseOnLoad:true,parserScope:a._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,attributeMap:a.delegate(b._Widget.prototype.attributeMap,{title:[]}),stopParser:true,template:false,create:function(e,c){if((!e||!e.template)&&c&&!("href" in e)&&!("content" in e)){var d=a.doc.createDocumentFragment();c=a.byId(c);while(c.firstChild){d.appendChild(c.firstChild);}e=a.delegate(e,{content:d});}this.inherited(arguments,[e,c]);},postMixInProperties:function(){this.inherited(arguments);var c=a.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=a.string.substitute(this.loadingMessage,c);this.errorMessage=a.string.substitute(this.errorMessage,c);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.title="";if(!a.attr(this.domNode,"role")){b.setWaiRole(this.domNode,"group");}},_startChildren:function(){this.inherited(arguments);if(this._contentSetter){a.forEach(this._contentSetter.parseResults,function(c){if(!c._started&&!c._destroyed&&a.isFunction(c.startup)){c.startup();c._started=true;}},this);}},setHref:function(c){a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",c);},_setHrefAttr:function(c){this.cancel();this.onLoadDeferred=new a.Deferred(a.hitch(this,"cancel"));this.onLoadDeferred.addCallback(a.hitch(this,"onLoad"));this._set("href",c);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(c){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",c);},_setContentAttr:function(c){this._set("href","");this.cancel();this.onLoadDeferred=new a.Deferred(a.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.addCallback(a.hitch(this,"onLoad"));}this._setContent(c||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},uninitialize:function(){if(this._beingDestroyed){this.cancel();}this.inherited(arguments);},destroyRecursive:function(c){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new a.Deferred(a.hitch(this,"cancel"));this.onLoadDeferred.addCallback(a.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var d=this;var e={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(a.isObject(this.ioArgs)){a.mixin(e,this.ioArgs);}var c=(this._xhrDfd=(this.ioMethod||a.xhrGet)(e));c.addCallback(function(f){try{d._isDownloaded=true;d._setContent(f,false);d.onDownloadEnd();}catch(g){d._onError("Content",g);}delete d._xhrDfd;return f;});c.addErrback(function(f){if(!c.canceled){d._onError("Download",f);}delete d._xhrDfd;return f;});delete this._hrefChanged;},_onLoadHandler:function(c){this._set("isLoaded",true);try{this.onLoadDeferred.callback(c);}catch(d){console.error("Error "+this.widgetId+" running custom onLoad code: "+d.message);}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(c){console.error("Error "+this.widgetId+" running custom onUnload code: "+c.message);}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler();}var c=this._contentSetter;a.forEach(this.getChildren(),function(d){if(d.destroyRecursive){d.destroyRecursive();}});if(c){a.forEach(c.parseResults,function(d){if(d.destroyRecursive&&d.domNode&&d.domNode.parentNode==a.body()){d.destroyRecursive();}});delete c.parseResults;}a.html._emptyNode(this.containerNode);delete this._singleChild;},_setContent:function(c,f){this.destroyDescendants();var e=this._contentSetter;if(!(e&&e instanceof a.html._ContentSetter)){e=this._contentSetter=new a.html._ContentSetter({node:this.containerNode,_onError:a.hitch(this,this._onError),onContentError:a.hitch(this,function(h){var g=this.onContentError(h);try{this.containerNode.innerHTML=g;}catch(h){console.error("Fatal "+this.id+" could not change content due to "+h.message,h);}})});}var d=a.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang},this._contentSetterParams||{});e.set((a.isObject(c)&&c.domNode)?c.domNode:c,d);delete this._contentSetterParams;if(this.doLayout){this._checkIfSingleChild();}if(!f){if(this._started){this._startChildren();this._scheduleLayout();}this._onLoadHandler(c);}},_onError:function(d,f,c){this.onLoadDeferred.errback(f);var e=this["on"+d+"Error"].call(this,f);if(c){console.error(c,f);}else{if(e){this._setContent(e,true);}}},onLoad:function(c){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(c){},onDownloadError:function(c){return this.errorMessage;},onDownloadEnd:function(){}});return b.layout.ContentPane;});