define("dojo/dnd/Moveable",["dojo","dojo/dnd/Mover"],function(a){a.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(b,c){this.node=a.byId(b);if(!c){c={};}this.handle=c.handle?a.byId(c.handle):null;if(!this.handle){this.handle=this.node;}this.delay=c.delay>0?c.delay:0;this.skip=c.skip;this.mover=c.mover?c.mover:a.dnd.Mover;this.events=[a.connect(this.handle,"onmousedown",this,"onMouseDown"),a.connect(this.handle,"ontouchstart",this,"onMouseDown"),a.connect(this.handle,"ondragstart",this,"onSelectStart"),a.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(c,b){return new a.dnd.Moveable(b,c);},destroy:function(){a.forEach(this.events,a.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(b){if(this.skip&&a.dnd.isFormElement(b)){return;}if(this.delay){this.events.push(a.connect(this.handle,"onmousemove",this,"onMouseMove"),a.connect(this.handle,"ontouchmove",this,"onMouseMove"),a.connect(this.handle,"onmouseup",this,"onMouseUp"),a.connect(this.handle,"ontouchend",this,"onMouseUp"));var c=b.touches?b.touches[0]:b;this._lastX=c.pageX;this._lastY=c.pageY;}else{this.onDragDetected(b);}a.stopEvent(b);},onMouseMove:function(b){var c=b.touches?b.touches[0]:b;if(Math.abs(c.pageX-this._lastX)>this.delay||Math.abs(c.pageY-this._lastY)>this.delay){this.onMouseUp(b);this.onDragDetected(b);}a.stopEvent(b);},onMouseUp:function(c){for(var b=0;b<2;++b){a.disconnect(this.events.pop());}a.stopEvent(c);},onSelectStart:function(b){if(!this.skip||!a.dnd.isFormElement(b)){a.stopEvent(b);}},onDragDetected:function(b){new this.mover(this.node,b,this);},onMoveStart:function(b){a.publish("/dnd/move/start",[b]);a.addClass(a.body(),"dojoMove");a.addClass(this.node,"dojoMoveItem");},onMoveStop:function(b){a.publish("/dnd/move/stop",[b]);a.removeClass(a.body(),"dojoMove");a.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(b,c){},onMove:function(c,b,f){this.onMoving(c,b);var d=c.node.style;d.left=b.l+"px";d.top=b.t+"px";this.onMoved(c,b);},onMoving:function(c,b){},onMoved:function(c,b){}});return a.dnd.Moveable;});