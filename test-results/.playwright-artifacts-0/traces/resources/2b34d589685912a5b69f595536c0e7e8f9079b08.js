define("dojo/_base/fx",["dojo/lib/kernel","dojo/_base/Color","dojo/_base/connect","dojo/_base/lang","dojo/_base/html"],function(a){(function(){var h=a;var f=h._mixin;a._Line=function(j,d){this.start=j;this.end=d;};a._Line.prototype.getValue=function(d){return((this.end-this.start)*d)+this.start;};a.Animation=function(d){f(this,d);if(h.isArray(this.curve)){this.curve=new h._Line(this.curve[0],this.curve[1]);}};h._Animation=h.Animation;h.extend(a.Animation,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var j=this._percent,d=this.easing;return d?d(j):j;},_fire:function(j,k){var d=k||[];if(this[j]){if(h.config.debugAtAllCosts){this[j].apply(this,d);}else{try{this[j].apply(this,d);}catch(l){console.error("exception in animation handler for:",j);console.error(l);}}}return this;},play:function(k,j){var l=this;if(l._delayTimer){l._clearTimer();}if(j){l._stopTimer();l._active=l._paused=false;l._percent=0;}else{if(l._active&&!l._paused){return l;}}l._fire("beforeBegin",[l.node]);var m=k||l.delay,d=a.hitch(l,"_play",j);if(m>0){l._delayTimer=setTimeout(d,m);return l;}d();return l;},_play:function(d){var k=this;if(k._delayTimer){k._clearTimer();}k._startTime=new Date().valueOf();if(k._paused){k._startTime-=k.duration*k._percent;}k._active=true;k._paused=false;var j=k.curve.getValue(k._getStep());if(!k._percent){if(!k._startRepeatCount){k._startRepeatCount=k.repeat;}k._fire("onBegin",[j]);}k._fire("onPlay",[j]);k._cycle();return k;},pause:function(){var d=this;if(d._delayTimer){d._clearTimer();}d._stopTimer();if(!d._active){return d;}d._paused=true;d._fire("onPause",[d.curve.getValue(d._getStep())]);return d;},gotoPercent:function(j,d){var k=this;k._stopTimer();k._active=k._paused=true;k._percent=j;if(d){k.play();}return k;},stop:function(d){var j=this;if(j._delayTimer){j._clearTimer();}if(!j._timer){return j;}j._stopTimer();if(d){j._percent=1;}j._fire("onStop",[j.curve.getValue(j._getStep())]);j._active=j._paused=false;return j;},status:function(){if(this._active){return this._paused?"paused":"playing";}return"stopped";},_cycle:function(){var j=this;if(j._active){var k=new Date().valueOf();var d=(k-j._startTime)/(j.duration);if(d>=1){d=1;}j._percent=d;if(j.easing){d=j.easing(d);}j._fire("onAnimate",[j.curve.getValue(d)]);if(j._percent<1){j._startTimer();}else{j._active=false;if(j.repeat>0){j.repeat--;j.play(null,true);}else{if(j.repeat==-1){j.play(null,true);}else{if(j._startRepeatCount){j.repeat=j._startRepeatCount;j._startRepeatCount=0;}}}j._percent=0;j._fire("onEnd",[j.node]);!j.repeat&&j._stopTimer();}}return j;},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer;}});var e=0,i=null,c={run:function(){}};h.extend(h.Animation,{_startTimer:function(){if(!this._timer){this._timer=h.connect(c,"run",this,"_cycle");e++;}if(!i){i=setInterval(h.hitch(c,"run"),this.rate);}},_stopTimer:function(){if(this._timer){h.disconnect(this._timer);this._timer=null;e--;}if(e<=0){clearInterval(i);i=null;e=0;}}});var g=h.isIE?function(j){var d=j.style;if(!d.width.length&&h.style(j,"width")=="auto"){d.width="auto";}}:function(){};a._fade=function(d){d.node=h.byId(d.node);var l=f({properties:{}},d),j=(l.properties.opacity={});j.start=!("start" in l)?function(){return +h.style(l.node,"opacity")||0;}:l.start;j.end=l.end;var k=h.animateProperty(l);h.connect(k,"beforeBegin",h.partial(g,l.node));return k;};a.fadeIn=function(d){return h._fade(f({end:1},d));};a.fadeOut=function(d){return h._fade(f({end:0},d));};a._defaultEasing=function(d){return 0.5+((Math.sin((d+1.5)*Math.PI))/2);};var b=function(d){this._properties=d;for(var j in d){var k=d[j];if(k.start instanceof h.Color){k.tempColor=new h.Color();}}};b.prototype.getValue=function(j){var d={};for(var k in this._properties){var m=this._properties[k],l=m.start;if(l instanceof h.Color){d[k]=h.blendColors(l,m.end,j,m.tempColor).toCss();}else{if(!h.isArray(l)){d[k]=((m.end-l)*j)+l+(k!="opacity"?m.units||"px":0);}}}return d;};a.animateProperty=function(d){var k=d.node=h.byId(d.node);if(!d.easing){d.easing=h._defaultEasing;}var j=new h.Animation(d);h.connect(j,"beforeBegin",j,function(){var n={};for(var o in this.properties){if(o=="width"||o=="height"){this.node.display="block";}var q=this.properties[o];if(h.isFunction(q)){q=q(k);}q=n[o]=f({},(h.isObject(q)?q:{end:q}));if(h.isFunction(q.start)){q.start=q.start(k);}if(h.isFunction(q.end)){q.end=q.end(k);}var m=(o.toLowerCase().indexOf("color")>=0);function l(s,t){var r={height:s.offsetHeight,width:s.offsetWidth}[t];if(r!==undefined){return r;}r=h.style(s,t);return(t=="opacity")?+r:(m?r:parseFloat(r));}if(!("end" in q)){q.end=l(k,o);}else{if(!("start" in q)){q.start=l(k,o);}}if(m){q.start=new h.Color(q.start);q.end=new h.Color(q.end);}else{q.start=(o=="opacity")?+q.start:parseFloat(q.start);}}this.curve=new b(n);});h.connect(j,"onAnimate",h.hitch(h,"style",j.node));return j;};a.anim=function(l,k,m,n,j,d){return h.animateProperty({node:l,duration:m||h.Animation.prototype.duration,properties:k,easing:n,onEnd:j}).play(d||0);};})();return a.animateProperty;});