define("dojo/_base/event",["dojo/lib/kernel","dojo/_base/connect"],function(a){(function(){var b=(a._event_listener={add:function(k,j,i){if(!k){return;}j=b._normalizeEventName(j);i=b._fixCallback(j,i);if(!a.isIE&&(j=="mouseenter"||j=="mouseleave")){var l=i;j=(j=="mouseenter")?"mouseover":"mouseout";i=function(m){if(!a.isDescendant(m.relatedTarget,k)){return l.call(this,m);}};}k.addEventListener(j,i,false);return i;},remove:function(j,i,k){if(j){i=b._normalizeEventName(i);if(!a.isIE&&(i=="mouseenter"||i=="mouseleave")){i=(i=="mouseenter")?"mouseover":"mouseout";}j.removeEventListener(i,k,false);}},_normalizeEventName:function(i){return i.slice(0,2)=="on"?i.slice(2):i;},_fixCallback:function(j,i){return j!="keypress"?i:function(k){return i.call(this,b._fixEvent(k,this));};},_fixEvent:function(i,j){switch(i.type){case"keypress":b._setKeyChar(i);break;}return i;},_setKeyChar:function(i){i.keyChar=i.charCode>=32?String.fromCharCode(i.charCode):"";i.charOrCode=i.keyChar||i.keyCode;},_punctMap:{106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39}});a.fixEvent=function(i,j){return b._fixEvent(i,j);};a.stopEvent=function(i){i.preventDefault();i.stopPropagation();};var e=a._listener;a._connect=function(n,j,k,i,r){var q=n&&(n.nodeType||n.attachEvent||n.addEventListener);var p=q?(r?2:1):0,m=[a._listener,b,e][p];var o=m.add(n,j,a.hitch(k,i));return[n,j,o,p];};a._disconnect=function(l,i,k,j){([a._listener,b,e][j]).remove(l,i,k);};a.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:a.isSafari?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,copyKey:a.isMac&&!a.isAIR?(a.isSafari?91:224):17};var f=a.isMac?"metaKey":"ctrlKey";a.isCopyKey=function(i){return i[f];};if(a.isIE<9||(a.isIE&&a.isQuirks)){a.mouseButtons={LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(j,i){return j.button&i;},isLeft:function(i){return i.button&1;},isMiddle:function(i){return i.button&4;},isRight:function(i){return i.button&2;}};}else{a.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(j,i){return j.button==i;},isLeft:function(i){return i.button==0;},isMiddle:function(i){return i.button==1;},isRight:function(i){return i.button==2;}};}if(a.isIE){var h=function(j,i){try{return(j.keyCode=i);}catch(j){return 0;}};var d=a._listener;var c=(a._ieListenersName="_"+a._scopeName+"_listeners");if(!a.config._allow_leaks){e=d=a._ie_listener={handlers:[],add:function(k,m,j){k=k||a.global;var i=k[m];if(!i||!i[c]){var l=a._getIeDispatcher();l.target=i&&(g.push(i)-1);l[c]=[];i=k[m]=l;}return i[c].push(g.push(j)-1);},remove:function(m,n,k){var j=(m||a.global)[n],i=j&&j[c];if(j&&i&&k--){delete g[i[k]];delete i[k];}}};var g=d.handlers;}a.mixin(b,{add:function(m,l,j){if(!m){return;}l=b._normalizeEventName(l);if(l=="onkeypress"){var i=m.onkeydown;if(!i||!i[c]||!i._stealthKeydownHandle){var k=b.add(m,"onkeydown",b._stealthKeyDown);i=m.onkeydown;i._stealthKeydownHandle=k;i._stealthKeydownRefs=1;}else{i._stealthKeydownRefs++;}}return d.add(m,l,b._fixCallback(j));},remove:function(k,j,l){j=b._normalizeEventName(j);d.remove(k,j,l);if(j=="onkeypress"){var i=k.onkeydown;if(--i._stealthKeydownRefs<=0){d.remove(k,"onkeydown",i._stealthKeydownHandle);delete i._stealthKeydownHandle;}}},_normalizeEventName:function(i){return i.slice(0,2)!="on"?"on"+i:i;},_nop:function(){},_fixEvent:function(j,k){if(!j){var i=k&&(k.ownerDocument||k.document||k).parentWindow||window;j=i.event;}if(!j){return(j);}j.target=j.srcElement;j.currentTarget=(k||j.srcElement);j.layerX=j.offsetX;j.layerY=j.offsetY;var m=j.srcElement,n=(m&&m.ownerDocument)||document;var l=((a.isIE<6)||(n.compatMode=="BackCompat"))?n.body:n.documentElement;var o=a._getIeDocumentElementOffset();j.pageX=j.clientX+a._fixIeBiDiScrollLeft(l.scrollLeft||0)-o.x;j.pageY=j.clientY+(l.scrollTop||0)-o.y;if(j.type=="mouseover"){j.relatedTarget=j.fromElement;}if(j.type=="mouseout"){j.relatedTarget=j.toElement;}if(a.isIE<9||a.isQuirks){j.stopPropagation=b._stopPropagation;j.preventDefault=b._preventDefault;}return b._fixKeys(j);},_fixKeys:function(i){switch(i.type){case"keypress":var j=("charCode" in i?i.charCode:i.keyCode);if(j==10){j=0;i.keyCode=13;}else{if(j==13||j==27){j=0;}else{if(j==3){j=99;}}}i.charCode=j;b._setKeyChar(i);break;}return i;},_stealthKeyDown:function(i){var m=i.currentTarget.onkeypress;if(!m||!m[c]){return;}var l=i.keyCode;var n=(l!=13||(a.isIE>=9&&!a.isQuirks))&&l!=32&&l!=27&&(l<48||l>90)&&(l<96||l>111)&&(l<186||l>192)&&(l<219||l>222);if(n||i.ctrlKey){var o=n?0:l;if(i.ctrlKey){if(l==3||l==13){return;}else{if(o>95&&o<106){o-=48;}else{if((!i.shiftKey)&&(o>=65&&o<=90)){o+=32;}else{o=b._punctMap[o]||o;}}}}var j=b._synthesizeEvent(i,{type:"keypress",faux:true,charCode:o});m.call(i.currentTarget,j);if(a.isIE<9||(a.isIE&&a.isQuirks)){i.cancelBubble=j.cancelBubble;}i.returnValue=j.returnValue;h(i,j.keyCode);}},_stopPropagation:function(){this.cancelBubble=true;},_preventDefault:function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey){h(this,0);}this.returnValue=false;}});a.stopEvent=(a.isIE<9||a.isQuirks)?function(i){i=i||window.event;b._stopPropagation.call(i);b._preventDefault.call(i);}:a.stopEvent;}b._synthesizeEvent=function(i,k){var j=a.mixin({},i,k);b._setKeyChar(j);j.preventDefault=function(){i.preventDefault();};j.stopPropagation=function(){i.stopPropagation();};return j;};if(a.isOpera){a.mixin(b,{_fixEvent:function(i,j){switch(i.type){case"keypress":var k=i.which;if(k==3){k=99;}k=k<41&&!i.shiftKey?0:k;if(i.ctrlKey&&!i.shiftKey&&k>=65&&k<=90){k+=32;}return b._synthesizeEvent(i,{charCode:k});}return i;}});}if(a.isWebKit){b._add=b.add;b._remove=b.remove;a.mixin(b,{add:function(k,j,i){if(!k){return;}var l=b._add(k,j,i);if(b._normalizeEventName(j)=="keypress"){l._stealthKeyDownHandle=b._add(k,"keydown",function(m){var o=m.keyCode;var p=o!=13&&o!=32&&(o<48||o>90)&&(o<96||o>111)&&(o<186||o>192)&&(o<219||o>222);if(p||m.ctrlKey){var q=p?0:o;if(m.ctrlKey){if(o==3||o==13){return;}else{if(q>95&&q<106){q-=48;}else{if(!m.shiftKey&&q>=65&&q<=90){q+=32;}else{q=b._punctMap[q]||q;}}}}var n=b._synthesizeEvent(m,{type:"keypress",faux:true,charCode:q});i.call(m.currentTarget,n);}});}return l;},remove:function(j,i,k){if(j){if(k._stealthKeyDownHandle){b._remove(j,"keydown",k._stealthKeyDownHandle);}b._remove(j,i,k);}},_fixEvent:function(i,j){switch(i.type){case"keypress":if(i.faux){return i;}var k=i.charCode;k=k>=32?k:0;return b._synthesizeEvent(i,{charCode:k,faux:true});}return i;}});}})();if(a.isIE){a._ieDispatcher=function(m,g){var d=Array.prototype,k=a._ie_listener.handlers,n=m.callee,j=n[a._ieListenersName],p=k[n.target];var b=p&&p.apply(g,m);var o=[].concat(j);for(var e in o){var l=k[o[e]];if(!(e in d)&&l){l.apply(g,m);}}return b;};a._getIeDispatcher=function(){return new Function(a._scopeName+"._ieDispatcher(arguments, this)");};a._event_listener._fixCallback=function(b){var c=a._event_listener._fixEvent;return function(d){return b.call(this,c(d,this));};};}return a.connect;});