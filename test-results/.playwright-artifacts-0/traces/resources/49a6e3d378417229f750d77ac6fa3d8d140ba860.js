define("dijit/_editor/_Plugin",["dojo","dijit","dijit/_Widget","dijit/form/Button"],function(a,b){a.declare("dijit._editor._Plugin",null,{constructor:function(c,d){this.params=c||{};a.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:b.form.Button,disabled:false,getLabel:function(c){return this.editor.commands[c];},_initButton:function(){if(this.command.length){var c=this.getLabel(this.command),f=this.editor,e=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var d=a.mixin({label:c,dir:f.dir,lang:f.lang,showLabel:false,iconClass:e,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(d);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){a.forEach(this._connects,a.disconnect);if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(e,c,d){this._connects.push(a.connect(e,c,this,d));},updateState:function(){var h=this.editor,i=this.command,g,d;if(!h||!h.isLoaded||!i.length){return;}var f=this.get("disabled");if(this.button){try{d=!f&&h.queryCommandEnabled(i);if(this.enabled!==d){this.enabled=d;this.button.set("disabled",!d);}if(typeof this.button.checked=="boolean"){g=h.queryCommandState(i);if(this.checked!==g){this.checked=g;this.button.set("checked",h.queryCommandState(i));}}}catch(h){console.log(h);}}},setEditor:function(c){this.editor=c;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",a.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(c){if(this.button){c.addChild(this.button);}},set:function(e,f){if(typeof e==="object"){for(var d in e){this.set(d,e[d]);}return this;}var g=this._getAttrNames(e);if(this[g.s]){var c=this[g.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(e,f);}return c||this;},get:function(c){var d=this._getAttrNames(c);return this[d.g]?this[d.g]():this[c];},_setDisabledAttr:function(c){this.disabled=c;this.updateState();},_getAttrNames:function(e){var c=this._attrPairNames;if(c[e]){return c[e];}var d=e.charAt(0).toUpperCase()+e.substr(1);return(c[e]={s:"_set"+d+"Attr",g:"_get"+d+"Attr"});},_set:function(d,e){var c=this[d];this[d]=e;}});return b._editor._Plugin;});