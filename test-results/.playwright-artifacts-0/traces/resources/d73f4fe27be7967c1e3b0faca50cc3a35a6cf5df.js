define("dijit/form/TextBox",["dojo","dijit","text!dijit/form/templates/TextBox.html","dijit/form/_FormWidget"],function(a,b){a.declare("dijit.form.TextBox",b.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",templateString:a.cache("dijit.form","templates/TextBox.html"),_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" dojoAttachPoint="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:a.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:a.delegate(b.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var c=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((c=="hidden"||c=="file")&&this.templateString==b.form.TextBox.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},_setPlaceHolderAttr:function(c){this._set("placeHolder",c);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=a.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(c));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this._focused&&!this.textbox.value)?"":"none";}},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(f,e,d){var c;if(f!==undefined){c=this.filter(f);if(typeof d!="string"){if(c!==null&&((typeof c!="number")||!isNaN(c))){d=this.filter(this.format(c,this.constraints));}else{d="";}}}if(d!=null&&d!=undefined&&((typeof d)!="number"||!isNaN(d))&&this.textbox.value!=d){this.textbox.value=d;this._set("displayedValue",this.get("displayedValue"));}this._updatePlaceHolder();this.inherited(arguments,[c,e]);},displayedValue:"",getDisplayedValue:function(){a.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.","","2.0");return this.get("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(c){a.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",c);},_setDisplayedValueAttr:function(c){if(c===null||c===undefined){c="";}else{if(typeof c!="string"){c=String(c);}}this.textbox.value=c;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));},format:function(c,d){return((c==null||c==undefined)?"":(c.toString?c.toString():c));},parse:function(c,d){return c;},_refreshState:function(){},_onInput:function(c){if(c&&c.type&&/key/i.test(c.type)&&c.keyCode){switch(c.keyCode){case a.keys.SHIFT:case a.keys.ALT:case a.keys.CTRL:case a.keys.TAB:return;}}if(this.intermediateChanges){var d=this;setTimeout(function(){d._handleOnChange(d.get("value"),false);},0);}this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){if(a.isIE){setTimeout(a.hitch(this,function(){var f=a.getComputedStyle(this.domNode);if(f){var d=f.fontFamily;if(d){var c=this.domNode.getElementsByTagName("INPUT");if(c){for(var e=0;e<c.length;e++){c[e].style.fontFamily=d;}}}}}),0);}this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(a.isMoz||a.isOpera){this.connect(this.textbox,"oninput","_onInput");}else{this.connect(this.textbox,"onkeydown","_onInput");this.connect(this.textbox,"onkeyup","_onInput");this.connect(this.textbox,"onpaste","_onInput");this.connect(this.textbox,"oncut","_onInput");}},_blankValue:"",filter:function(c){if(c===null){return this._blankValue;}if(typeof c!="string"){return c;}if(this.trim){c=a.trim(c);}if(this.uppercase){c=c.toUpperCase();}if(this.lowercase){c=c.toLowerCase();}if(this.propercase){c=c.replace(/[^\s]+/g,function(d){return d.substring(0,1).toUpperCase()+d.substring(1);});}return c;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(c){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}if(this.selectOnClick&&a.isMoz){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}this._updatePlaceHolder();},_onFocus:function(c){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&c=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var f;if(a.isIE){var d=a.doc.selection.createRange();var e=d.parentElement();f=e==this.textbox&&d.text.length==0;}else{f=this.textbox.selectionStart==this.textbox.selectionEnd;}if(f){b.selectInputText(this.textbox);}});}this._updatePlaceHolder();this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);}});b.selectInputText=function(e,h,d){var g=a.global;var c=a.doc;e=a.byId(e);if(isNaN(h)){h=0;}if(isNaN(d)){d=e.value?e.value.length:0;}b.focus(e);if(c.selection&&a.body()["createTextRange"]){if(e.createTextRange){var f=e.createTextRange();f.collapse(true);f.moveStart("character",-99999);f.moveStart("character",h);f.moveEnd("character",d-h);f.select();}}else{if(g.getSelection){if(e.setSelectionRange){e.setSelectionRange(h,d);}}}};return b.form.TextBox;});