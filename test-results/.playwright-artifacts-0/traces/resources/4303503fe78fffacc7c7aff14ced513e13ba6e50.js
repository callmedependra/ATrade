define("dijit/form/_DateTimeTextBox",["dojo","dijit","text!dijit/form/templates/DropDownBox.html","dojo/date","dojo/date/locale","dojo/date/stamp","dijit/form/ValidationTextBox","dijit/_HasDropDown"],function(a,b){new Date("X");a.declare("dijit.form._DateTimeTextBox",[b.form.RangeBoundTextBox,b._HasDropDown],{templateString:a.cache("dijit.form","templates/DropDownBox.html"),hasDownArrow:true,openOnClick:true,regExpGen:a.date.locale.regexp,datePackage:"dojo.date",compare:function(e,c){var f=this._isInvalidDate(e);var d=this._isInvalidDate(c);return f?(d?0:-1):(d?1:a.date.compare(e,c,this._selector));},forceWidth:true,format:function(c,d){if(!c){return"";}return this.dateLocaleModule.format(c,d);},parse:function(c,d){return this.dateLocaleModule.parse(c,d)||(this._isEmpty(c)?null:undefined);},serialize:function(d,c){if(d.toGregorian){d=d.toGregorian();}return a.date.stamp.toISOString(d,c);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(c){var d=c.datePackage?c.datePackage+".Date":"Date";this.dateClassObj=a.getObject(d,false);this.value=new this.dateClassObj("");this.datePackage=c.datePackage||this.datePackage;this.dateLocaleModule=a.getObject(this.datePackage+".locale",false);this.regExpGen=this.dateLocaleModule.regexp;this._invalidDate=b.form._DateTimeTextBox.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(this.openOnClick||!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(d){d.selector=this._selector;d.fullYear=true;var c=a.date.stamp.fromISOString;if(typeof d.min=="string"){d.min=c(d.min);}if(typeof d.max=="string"){d.max=c(d.max);}this.inherited(arguments);},_isInvalidDate:function(c){return !c||isNaN(c)||typeof c!="object"||c.toString()==this._invalidDate;},_setValueAttr:function(e,d,c){if(e!==undefined){if(typeof e=="string"){e=a.date.stamp.fromISOString(e);}if(this._isInvalidDate(e)){e=null;}if(e instanceof Date&&!(this.dateClassObj instanceof Date)){e=new this.dateClassObj(e);}}this.inherited(arguments);if(this.dropDown){this.dropDown.set("value",e,false);}},_set:function(c,d){if(c=="value"&&this.value instanceof Date&&this.compare(d,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(c){if(this._isInvalidDate(c)){c=new this.dateClassObj();}this.dropDownDefaultValue=c;},openDropDown:function(f){if(this.dropDown){this.dropDown.destroy();}var c=a.getObject(this.popupClass,false),e=this,d=this.get("value");this.dropDown=new c({onChange:function(g){b.form._DateTimeTextBox.superclass._setValueAttr.call(e,g,true);},id:this.id+"_popup",dir:e.dir,lang:e.lang,value:d,currentFocus:!this._isInvalidDate(d)?d:this.dropDownDefaultValue,constraints:e.constraints,filterString:e.filterString,datePackage:e.datePackage,isDisabledDate:function(g){return !e.rangeCheck(g,e.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(d,c){this._setValueAttr(this.parse(d,this.constraints),c,d);}});return b.form._DateTimeTextBox;});