

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
  <link rel="shortcut icon" href="theme/html/blue/atrad/images/favicon.jpg" type="image/x-icon" />

  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache" />
  <meta http-equiv="cache-control" content="no-store" />
  <meta http-equiv="cache-control" content="must-revalidate" />
  <meta http-equiv="expires" content="-1" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />

  <!-- Bootstrap CSS -->  
  <link id="atradtheme" rel="stylesheet" type="text/css"
	href="theme/html/blue/atrad/css/bootstrap.min.css" />
	
  <!-- Style -->
  <link id="atradtheme" rel="stylesheet" type="text/css"
	href="theme/html/blue/atrad/css/style.css" />
  <link id="atradtheme" rel="stylesheet" type="text/css"
	href="theme/html/blue/atrad/css/fonts.css" />
  
  <!-- browser tab title-->
  <title>ATrad Login</title>
  
  <!-- javascript references -->
  <script src="theme/html/scripts/dojo/dojo.js"
	djConfig="parseOnLoad:true, isDebug:false"></script>	
  <script src="theme/html/scripts/myapp/loginDojo.js"></script>
  <script type="text/javascript"
	src="language/scripts/ClientMsgTranslator.jsp"></script>
  <script type="text/javascript" src="view/html/scripts/AJAXConnection.js"></script>
  <script type="text/javascript" src="view/html/scripts/errorDisplay.js"></script>
  <script type="text/javascript"  src="view/html/scripts/atradPageSettingsMenu.jsp"></script>
  <script type="text/javascript"
	src="language/scripts/ClientMsgTranslator.jsp"></script>
	
	
  <script type="text/javascript">
  
   if (ATRAD == undefined){
		var ATRAD = {};
   }
	
	window.onload = init;
	
	//init method	 
	function init() {
		getBrokerProperties();
		loadUsername();	
	}
	
	dojo.addOnLoad(function() {		
		dojo.connect(dojo.byId('btnSubmit'), 'onclick', submitLogin);
		dojo.connect(dojo.byId('txtUserName'), 'onkeypress', enterEventLoginSubmission);
		dojo.connect(dojo.byId('txtPassword'), 'onkeypress', enterEventLoginSubmission);		
		dojo.connect(dojo.byId('btnForgotPw'), 'onclick', showUserNameConfirmation);
		document.getElementById("compatible-browsers-button").addEventListener("click", showOrHideCompatibleBrowsers);
	});
	
	function showOrHideCompatibleBrowsers(){		
		var browsersDisplay = document.getElementById('compatible-browsers');		
		browsersDisplay.classList.toggle("browser-drop");		
	}
	
	var language = new ATRAD.ClientMsgTranslator();
	
	 //function to get the broker log path
	function getBrokerProperties(){		
		var url = "login?action=getLoginPageParams&format=json";
		var errorIns1 = document.getElementById('input-validation-text');	
		var ajaxConnection = new ATRAD.AJAXConnection(url, getBrokerPropertiesCallback, "json",-1, errorIns1, getBrokerPropertiesErrorCallBack, null);			
		ajaxConnection.RequestLoginPageData();
	}

	//callback method for getVersion method
	function getBrokerPropertiesCallback(response){		
		document.getElementById('brokerLoginLogo').src = response.data.logoPath;
		document.getElementById('company').innerHTML = response.data.company;
		document.getElementById('address').innerHTML = response.data.address;
		document.getElementById('telephone').innerHTML = response.data.telephone;
		document.getElementById('email').innerHTML = response.data.email;
		document.getElementById('heading-one').innerHTML = response.data.headingOne;
		document.getElementById('heading-two').innerHTML = response.data.headingTwo;
		document.getElementById('sub-heading').innerHTML = response.data.subHeading;
		document.getElementById('versionNumber').innerHTML= "<strong>"+response.data.versionNo+"</strong>";	
		document.getElementById('whatsapp').innerHTML = response.data.whatsappNumbers;
		document.getElementById('websiteLink').innerHTML = response.data.website.replace(/^https?:\/\//, '').replace(/\/$/, '');
		document.getElementById('websiteLink').href = response.data.website;
		
	}
	
	function getBrokerPropertiesErrorCallBack(response){		
		document.getElementById('brokerLoginLogo').src = "https://atradsolutions.com/images/logo-white.png" ;
		document.getElementById('company').innerHTML = "<strong>IronOne Technologies (Pvt) Ltd</strong>";
		document.getElementById('address').innerHTML = "<strong>11th Floor, DHPL Building, No.42, Nawam Mawatha, Colombo 02, Sri Lanka.</strong>";
		document.getElementById('telephone').innerHTML = "<strong>+94 112 300 500</strong>";
		document.getElementById('email').innerHTML = "<strong>info@atrad.lk</strong>";
		document.getElementById('heading-one').innerHTML = "<strong>Join over 100,000</strong>";
		document.getElementById('heading-two').innerHTML = "<strong>Users worldwide</strong>";
		document.getElementById('sub-heading').innerHTML = "<strong>Take it for a spin, experience our fanatical support if you need any help, and you’ll love it too.</strong>";
		document.getElementById('versionNumber').innerHTML= "<strong>version goes here</strong>";
	}
	
	//login to service
	function submitLogin() {		
		var form = dojo.byId("loginForm");
		var username = dojo.byId("txtUserName").value;
		var password = dojo.byId("txtPassword").value;
		var validated = validateHtmlLoginForm(username, password);
		if (!validated) {			 			
			return;
		}
		
		document.getElementById("btnSubmit").disabled = true;	
		//document.getElementById('input-validation-text').innerHTML = "";
		
		var errorIns1 = document.getElementById('input-validation-text');		

		var ajaxConnection = new ATRAD.AJAXConnection(null, processSubmitResponse, "json", -1,  errorIns1, erroredResponse, form);
		ajaxConnection.langTranslator = language;
		ajaxConnection.SubmitLoginData();

	}
	
	function validateHtmlLoginForm(username, password) {
		
		var returnVal=true;

		if (username == "") {		
			var uName = document.getElementById('txtUserName');
			uName.classList.remove("input-validation");
			uName.classList.add("input-validation");
			returnVal = false;
		} else if(username !== ""){
			var uName = document.getElementById('txtUserName');
			uName.classList.remove("input-validation");
		}
		
		if (password == "") {	
			var uName = document.getElementById('txtPassword');
			uName.classList.remove("input-validation");
			uName.classList.add("input-validation");
			returnVal = false;
		}else if (password !== ""){
			var uName = document.getElementById('txtPassword');
			uName.classList.remove("input-validation");
		}	
		
		if(!returnVal){
			var validationBox = document.getElementById('input-validation-box');
			validationBox.classList.remove("input-validation-alert");			
			document.getElementById('input-validation-text').innerHTML = language.getString('javascript3200');			
		}
		
		return returnVal;
	}
	
	function processSubmitResponse(responseText) {
		var response = responseText.data;
		
		if(document.getElementById("rememberMe").checked){
			document.cookie="username=" +dojo.byId("txtUserName").value;			
		}else{
			document.cookie="username=";
			document.cookie="role=";
			document.cookie="broker_code="
		}
			
		document.cookie="role=" +responseText.role;
		document.cookie="broker_code=" +responseText.broker_code;
		document.cookie="watchID=" +responseText.watchID;
		document.cookie="is_dvp_enabled=" +responseText.is_dvp_enabled;
		document.cookie="max_basket_limit=" +responseText.max_basket_limit;		
		
		var validationBox = document.getElementById('input-validation-box');
		validationBox.classList.remove("input-validation-alert");
		validationBox.classList.add("input-validation-alert");
		
		if (response == "success") {		
			window.location = 'home?action=showHome&format=html&reqid='+new Date().getTime();
		}else if(response=="newUser"){
			window.location = 'login?action=changePasswordNewUser&format=html&reqid='+new Date().getTime();
		}else if(response=="pwExpired"){
			 window.location = 'login?action=changeExpiredPassword&format=html&reqid='+new Date().getTime();
		}
	}
	
	function erroredResponse(error) {		
		document.getElementById("btnSubmit").disabled = false;
		var validationBox = document.getElementById('input-validation-box');
		validationBox.classList.remove("input-validation-alert");
		document.getElementById('input-validation-text').innerHTML = language.getString(error.description);		
	}
	
	function loadUsername() {
		var cookies=document.cookie.split(";");
		var x,y;

		for (var i=0;i<cookies.length;i++)
		{
			x=cookies[i].substr(0,cookies[i].indexOf("="));
			y=cookies[i].substr(cookies[i].indexOf("=")+1);

			if(x.replace(/\s/g, '')=='username'){
				dojo.byId("txtUserName").value=y;

				if(y.length>0){					
					document.getElementById("rememberMe").checked=true;
				}
				
				break;				
			}
		}
	}
	
	function enterEventLoginSubmission(event) {
		if (event.charOrCode == dojo.keys.ENTER){
			dojo.stopEvent(event);
			submitLogin();			
			return false;
		} else {
			return true;
		}
	}
	
	 function showUserNameConfirmation(){
		 window.location = 'login?action=forgotPasswordUserConfirm&format=html&reqid='+new Date().getTime();		
	 }
	
	</script>
</head>

<body>


  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="d-lg-flex half">
          <div class="bg" style="background-image: url('theme/html/blue/atrad/images/bg_1.jpg');">
            <img class="mt-2" src="theme/html/blue/atrad/images/atrad-logo.png" />
            <h1 class="mt-4"><strong><span id="heading-one"></span><br>
                <span id="heading-two"></span></strong></h1>
            <p class="mb-0" id="message"><span id="sub-heading"></span></p>
            <div class="client-details-wrapper space-between">
              <h6 class="text-center my-1">Download Products</h6>
              <div class="d-flex justify-content-between">
                <a href="#">
                  <div class="text-center">
                    <div class="device-rounded-wrapper">
                      <img src="theme/html/blue/atrad/images/ic-web.png" />
                    </div>
                    Desktop
                  </div>
                </a>
                <a href="#">
                  <div class="text-center">
                    <div class="device-rounded-wrapper">
                      <img src="theme/html/blue/atrad/images/ic-ios.png" />
                    </div>
                    iPad
                  </div>
                </a>
                <a href="https://apps.apple.com/lk/app/atrad-dgtrade-nepal/id6667111756" target="_blank">
                  <div class="text-center">
                    <div class="device-rounded-wrapper">
                      <img src="theme/html/blue/atrad/images/ic-ios.png" />
                    </div>
                    iPhone
                  </div>
                </a>
                <a href="https://play.google.com/store/apps/details?id=com.atrad.nepse.prod" target="_blank">
                  <div class="text-center">
                    <div class="device-rounded-wrapper">
                      <img src="theme/html/blue/atrad/images/ic-android.png" />
                    </div>
                    Android
                  </div>
                </a>
              </div>
            </div>
            <div class="client-details-wrapper mt-3">
              <h6 id="company"></h6>
              <span id="address"></span>
              <span id="telephone"></span>
              <span id="email"></span>
              <span id="website"><a id="websiteLink" target="_blank">https://ssl.com.np/</a></span>
              <span id="whatsapp"></span>
            
            </div>
            <div class="row mt-3">
              <ul class="social">
				<li>
					<a href="https://www.linkedin.com/company/13305572/admin/" target="_blank">
						<img src="theme/html/blue/atrad/images/ic-linkedin.png" />
					</a>
				</li>
				<li>
					<a href="https://web.facebook.com/ATradOnline" target="_blank">
						<img src="theme/html/blue/atrad/images/ic-facebook.png" />
					</a>
				</li>
				<li>
					<a href="https://twitter.com/ATradOnline" target="_blank">
						<img src="theme/html/blue/atrad/images/ic-twitter.png" />
					</a>
				</li>
				<li>
					<a href="https://www.youtube.com/channel/UCPPtlLWiECx57oGvL7Gpcfg" target="_blank">
						<img src="theme/html/blue/atrad/images/ic-youtube.png" />
					</a>				
				</li>
				<li>
					<a href="https://instagram.com/atrad_online?igshid=NTc4MTIwNjQ2YQ==" target="_blank">
						<img src="theme/html/blue/atrad/images/ic-instagram.png" />
					</a>					
				</li>
			 </ul>
          	</div>
          </div>
          
          <div class="contents">
            <div class="container">
              <div class="row align-items-center justify-content-center">
                <div class="col-md-8 text-center">
                  <!-- img class="mt-3" src="theme/html/blue/atrad/images/client-logo.png" /-->
                  <img id="brokerLoginLogo" class="mt-3" height="80" />
                </div>
                
                <div class="col-md-8">
	                <div  dojoType="dijit.form.Form" id="loginForm" jsId="loginForm"
					name="loginForm" action="login" encType="multipart/form-data"
					method="post">
						<input type="hidden" id="action" name="action" value="login" />
						<input type="hidden" id="format" name="format" value="json" />
		                <h3>Login</h3>
		                <p class="mb-0">Sign in with your Username and Password</p>
		                  <!-- form action="#" method="post"-->
		                  
		                 <div class="mt-1 mb-0 alert alert-danger show input-validation-alert" id="input-validation-box">
	                       <div class="icon">
	                           <i><img src="theme/html/blue/atrad/images/icon-info.svg" width="20" height="20" /> </i>
	                       </div>                   
	                       <p class="mb-0" id="input-validation-text"></p>
		                 </div>
		                 <div class="form-group first">
		                   <label for="username">Username</label>
		                   <input type="text" name="txtUserName" id="txtUserName"
								maxlength="30" tabindex="1" class="form-control">
		                   <span class="form-validation" id="txtValidation"></span>
		                 </div>
	                    <div class="form-group last">
	                      <label for="password">Password </label>
	                      <input type="password" name="txtPassword" id="txtPassword"
										maxlength="30" tabindex="2" class="form-control">
	                    </div>	
		                <div class="d-flex mb-1 align-items-center">	
	                      <label class="main"> Remember Me
	                        <input type="checkbox" id="rememberMe">
	                        <span class="geekmark"></span>                       
	                      </label>
	                      <span class="ml-auto"><a href="https://www.youtube.com/channel/UCPPtlLWiECx57oGvL7Gpcfg" target="_blank" class="alt-blue"> <img src="theme/html/blue/atrad/images/ic-help.png" />
	                          Help</a></span>
	                    </div>	
	                    <button class="btn btn-block btn-primary" tabindex="3" type="submit"
										name="btnSubmit" id="btnSubmit" onclick="return false;">Login</button>
	
	                    <div class="d-flex align-items-center">
	                      <span><a id="compatible-browsers-button" href="#">Compatible Browsers</a></span>                      
	                      <span class="ml-auto">
	                      	<button dojoType="dijit.form.Button" tabindex="3" type="button"
									name="btnForgotPw" id="btnForgotPw" onclick="return false;">
									<a href="#" class="forgot-pass">Forgot Password?</a>
							</button>
	                      </span>
	                    </div>
	                  <!-- /form-->
                	</div>
                </div>

                <!-- Make sure to make it visible compatibility-wrapper div -->
                <!-- Make it visible after clicking the "Compatible Browsers" link -->

                <div id="compatible-browsers" class="compatibility-wrapper p-2 browser-drop">
                  <div class="row">
                    <div class="col-6">
                      <div class="compatible-item-wrapper mr-1">
                        <div class="d-flex">
                          <div class="mr-2">
                            <img src="theme/html/blue/atrad/images/ic-firefox.png" />
                          </div>
                          <div class="">
                            <h6>Mozilla Firefox</h6>
                            <p>14.0 and above - Recommended</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="compatible-item-wrapper mr-1">
                        <div class="d-flex">
                          <div class="mr-2">
                            <img src="theme/html/blue/atrad/images/ic-chrome.png" />
                          </div>
                          <div class="">
                            <h6>Google Chrome</h6>
                            <p>15.0 and above - Recommended</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row mt-2">
                    <div class="col-6">
                      <div class="compatible-item-wrapper">
                        <div class="d-flex">
                          <div class="mr-2">
                            <img src="theme/html/blue/atrad/images/ic-internet-explorer.png" />
                          </div>
                          <div class="">
                            <h6>Internet Explorer </h6>
                            <p>9.0 and above</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-6">
                      <div class="compatible-item-wrapper">
                        <div class="d-flex">
                          <div class="mr-2">
                            <img src="theme/html/blue/atrad/images/ic-safari.png" />
                          </div>
                          <div class="">
                            <h6>Safari</h6>
                            <p>5.0 and above</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="d-flex footer-text">
          <div>
            © ATrad. All rights reserved . Powered by<a href="https://www.irononetech.com/" target="_blank">&nbsp; IronOne Technologies (Pvt) Ltd.</a>&nbsp;&nbsp;Managed by<a href="https://dghub.io/" target="_blank">&nbsp; Digihub (Pvt) Ltd.</a>
          </div>
          <div class="ml-auto">
            ATrad Premier version: <span class="version-number" id="versionNumber"></span>. Visit us: <a href="https://atradsolutions.com/" target="_blank">atradsolutions.com</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>