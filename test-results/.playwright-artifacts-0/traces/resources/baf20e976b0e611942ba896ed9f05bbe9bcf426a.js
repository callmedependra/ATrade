define("dijit/_base/popup",["dojo","dijit","dijit/_base/focus","dijit/_base/place","dijit/_base/window"],function(a,b){b.popup={_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(e){var f=e.declaredClass?e._popupWrapper:(e.parentNode&&a.hasClass(e.parentNode,"dijitPopup")),d=e.domNode||e;if(!f){f=a.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},a.body());f.appendChild(d);var c=d.style;c.display="";c.visibility="";c.position="";c.top="0px";if(e.declaredClass){e._popupWrapper=f;a.connect(e,"destroy",function(){a.destroy(f);delete e._popupWrapper;});}}return f;},moveOffScreen:function(c){var d=this._createWrapper(c);a.style(d,{visibility:"hidden",top:"-9999px",display:""});},hide:function(c){var d=this._createWrapper(c);a.style(d,"display","none");},getTopPopup:function(){var c=this._stack;for(var d=c.length-1;d>0&&c[d].parent===c[d-1].widget;d--){}return c[d];},open:function(i){var k=this._stack,h=i.popup,g=i.orient||((i.parent?i.parent.isLeftToRight():a._isBodyLtr())?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"}),j=i.around,d=(i.around&&i.around.id)?(i.around.id+"_dropdown"):("popup_"+this._idGen++);while(k.length&&(!i.parent||!a.isDescendant(i.parent.domNode,k[k.length-1].widget.domNode))){b.popup.close(k[k.length-1].widget);}var c=this._createWrapper(h);a.attr(c,{id:d,style:{zIndex:this._beginZIndex+k.length},"class":"dijitPopup "+(h.baseClass||h["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:i.parent?i.parent.id:""});if(a.isIE||a.isMoz){if(!h.bgIframe){h.bgIframe=new b.BackgroundIframe(c);}}var f=j?b.placeOnScreenAroundElement(c,j,g,h.orient?a.hitch(h,"orient"):null):b.placeOnScreen(c,i,g=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],i.padding);c.style.display="";c.style.visibility="visible";h.domNode.style.visibility="visible";var e=[];e.push(a.connect(c,"onkeypress",this,function(l){if(l.charOrCode==a.keys.ESCAPE&&i.onCancel){a.stopEvent(l);i.onCancel();}else{if(l.charOrCode===a.keys.TAB){a.stopEvent(l);var m=this.getTopPopup();if(m&&m.onCancel){m.onCancel();}}}}));if(h.onCancel){e.push(a.connect(h,"onCancel",i.onCancel));}e.push(a.connect(h,h.onExecute?"onExecute":"onChange",this,function(){var l=this.getTopPopup();if(l&&l.onExecute){l.onExecute();}}));k.push({widget:h,parent:i.parent,onExecute:i.onExecute,onCancel:i.onCancel,onClose:i.onClose,handlers:e});if(h.onOpen){h.onOpen(f);}return f;},close:function(e){var c=this._stack;while((e&&a.some(c,function(h){return h.widget==e;}))||(!e&&c.length)){var g=c.pop(),f=g.widget,d=g.onClose;if(f.onClose){f.onClose();}a.forEach(g.handlers,a.disconnect);if(f&&f.domNode){this.hide(f);}if(d){d();}}}};b._frames=new function(){var c=[];this.pop=function(){var e;if(c.length){e=c.pop();e.style.display="";}else{if(a.isIE<9){var f=a.config.dojoBlankHtmlUrl||(a.moduleUrl("dojo","resources/blank.html")+"")||'javascript:""';var d="<iframe src='"+f+"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";e=a.doc.createElement(d);}else{e=a.create("iframe");e.src='javascript:""';e.className="dijitBackgroundIframe";a.style(e,"opacity",0.1);}e.tabIndex=-1;b.setWaiRole(e,"presentation");}return e;};this.push=function(d){d.style.display="none";c.push(d);};}();b.BackgroundIframe=function(d){if(!d.id){throw new Error("no id");}if(a.isIE||a.isMoz){var c=(this.iframe=b._frames.pop());d.appendChild(c);if(a.isIE<7||a.isQuirks){this.resize(d);this._conn=a.connect(d,"onresize",this,function(){this.resize(d);});}else{a.style(c,{width:"100%",height:"100%"});}}};a.extend(b.BackgroundIframe,{resize:function(c){if(this.iframe){a.style(this.iframe,{width:c.offsetWidth+"px",height:c.offsetHeight+"px"});}},destroy:function(){if(this._conn){a.disconnect(this._conn);this._conn=null;}if(this.iframe){b._frames.push(this.iframe);delete this.iframe;}}});return b.popup;});